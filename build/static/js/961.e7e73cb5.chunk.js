"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[961],{961:(e,l,t)=>{t.r(l),t.d(l,{default:()=>S});var i=t(826),s=t(5043),n=t(3216),a=t(1935),o=t(1699),r=t(8247),d=t(579);const c=e=>{let{collectionData:l,isLoading:t}=e;const[i,n]=(0,s.useState)(!1);return console.log("dddd :",l),(0,d.jsxs)("div",{className:"flex flex-col mt-[80px]",children:[l?(0,d.jsx)("div",{className:"relative rounded w-full object-cover mx-auto",children:(0,d.jsxs)("div",{className:"overflow-hidden h-[200px] w-full",children:[(0,d.jsx)("img",{src:null===l||void 0===l?void 0:l.imgUrl,alt:null===l||void 0===l?void 0:l.name,className:"w-full rounded-lg h-full object-cover"}),(0,d.jsx)("div",{className:"absolute bottom-0 left-0 right-0 text-white p-2",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-end",children:[(0,d.jsx)("h2",{className:"text-xl font-bold",children:null===l||void 0===l?void 0:l.name}),(0,d.jsxs)("div",{className:"flex  flex-row justify-between gap-4 mt-1",children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{children:"Volume"}),(0,d.jsxs)("span",{children:[(Number(null===l||void 0===l?void 0:l.volume)/1e11).toFixed(2),"k"]})]}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{children:"Listings"}),(0,d.jsx)("span",{children:Number(null===l||void 0===l?void 0:l.totalListed)})]}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{children:"Floor Price"}),(0,d.jsx)("span",{children:(Number(null===l||void 0===l?void 0:l.floorPrice)/1e8).toFixed(2)})]})]})]})})]})},null===l||void 0===l?void 0:l.canisterId):(0,d.jsx)("div",{className:"flex flex-col mt-[80px] justify-center items-center",children:(0,d.jsx)(r.A,{size:25,color:"white"})}),l&&(0,d.jsxs)("div",{className:"mx-4 p-4 flex flex-col justify-center items-center",children:[(0,d.jsx)("div",{className:"text-white text-center",children:i?null===l||void 0===l?void 0:l.description:`${null===l||void 0===l?void 0:l.description.slice(0,150)}...`}),(0,d.jsx)("button",{onClick:()=>{n(!i)},className:"text-white text-md font-bold flex justify-center items-center hover:underline mt-2",children:i?"See Less":"See More"})]})]})};t(1289),t(8657);var x=t(893);var u=t(4158);const h=e=>{let{results:l,isSidebarOpen:t,isLoading:i,minPrice:s,maxPrice:n,handleMinPriceChange:a,handleMaxPriceChange:o,collectionID:c,traitsData:x,handleOptionClick:h,handleSectionClick:v,expandedSections:p,selectedOptions:m,setExpandedSections:f,setSelectedOptions:g}=e;return(0,d.jsxs)("div",{className:"flex  w-full  text-white gap-3 border-gray-400 p-2",children:[t&&(0,d.jsx)("div",{className:"hidden md:block border border-gray-600 p-4 w-1/4",children:(0,d.jsxs)("div",{className:"flex txt-black flex-col mt-4",children:[(0,d.jsx)("span",{children:"Price"}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("input",{type:"text",placeholder:"Min",value:s,onChange:a,className:"p-1 rounded text-black",required:!0}),(0,d.jsx)("input",{type:"text",placeholder:"Max",value:n,onChange:o,className:"p-1 rounded text-black",required:!0})]}),(0,d.jsx)("div",{className:"flex flex-col mt-4",children:"rw7qm-eiaaa-aaaak-aaiqq-cai"===c&&(0,d.jsx)(u.A,{traitsData:x,handleOptionClick:h,handleSectionClick:v,expandedSections:p,selectedOptions:m,setExpandedSections:f,setSelectedOptions:g})})]})}),(0,d.jsx)("div",{className:"flex flex-col w-full",children:(0,d.jsx)("div",{className:"flex flex-row w-full",children:(0,d.jsx)("div",{className:"flex-grow w-full flex  justify-center items-center flex-wrap",children:i?(0,d.jsx)(r.A,{size:25,color:"white"}):l})})})]})};var v=t(5394);const p=e=>{let{onClickHandler:l,value:t,title:i}=e;return(0,d.jsx)("button",{onClick:l,value:t,className:"btns",children:i})};var m=t(423);const f=e=>{let{currentPage:l,nextPage:t,pages:i,prevPage:s,searchQuery:n,sortPrice:a,isModalOpen:o,toggleSidebar:r,closeModal:c,handlelistedChange:x,handleSortPriceChange:h,handleSearchChange:f,maxPrice:g,minPrice:j,handleMaxPriceChange:b,handleMinPriceChange:w,traitsData:N,handleOptionClick:y,handleSectionClick:S,expandedSections:C,selectedOptions:k,setExpandedSections:P,setSelectedOptions:O}=e;return(0,d.jsxs)("div",{className:"flex flex-col w-full gap-4 p-2",children:[(0,d.jsxs)("div",{className:"flex mt-[05px] cursor-pointer border-b-[1px] pb-2 border-white flex-row justify-between items-center w-full",children:[(0,d.jsx)(v.n6t,{size:35,color:"white",onClick:r}),(0,d.jsxs)("div",{className:"hidden md:block relative ",children:[(0,d.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,d.jsx)(m.uG9,{color:"gray",size:25})}),(0,d.jsx)("input",{type:"text",className:"hidden md:block bg-transparent border outline-none border-gray-300 text-white rounded-lg w-full pl-10 p-2.5",placeholder:"Search by NFT number",onChange:f,value:n})]}),(0,d.jsx)("div",{className:"hidden md:flex md:flex-row gap-2",children:(0,d.jsxs)("select",{value:a,onChange:h,className:" block bg-transparent  text-white  w-full p-3 border rounded-lg",children:[(0,d.jsx)("option",{value:"lowtohigh",className:"bg-red-400",children:"Price Low to High"}),(0,d.jsx)("option",{value:"hightolow",children:"Price High to Low"})]})})]}),(0,d.jsx)("div",{className:"hidden md:flex-row md:block justify-between items-center cursor-pointer",children:(0,d.jsxs)("div",{className:"flex flex-row justify-between items-center ",children:[(0,d.jsxs)("div",{className:"flex mt-4",children:[(0,d.jsx)(p,{onClickHandler:x,value:"all",title:"All"}),(0,d.jsx)(p,{onClickHandler:x,value:"listed",title:"Listed"}),(0,d.jsx)(p,{onClickHandler:x,value:"hasoffers",title:"Has Offers"})]}),(0,d.jsxs)("div",{className:"flex gap-4 items-center justify-center mt-4",children:[(0,d.jsx)("button",{onClick:s,disabled:0===l,className:"px-4 py-1 bg-transparent border text-white rounded "+(0===l?"opacity-50 cursor-not-allowed":""),children:"Previous"}),(0,d.jsx)("button",{onClick:t,disabled:l>=i-1,className:"px-4 py-1 bg-transparent border text-white rounded "+(l>=i-1?"opacity-50 cursor-not-allowed":""),children:"Next"})]})]})}),o&&(0,d.jsx)("div",{className:"fixed inset-0 mt-[10vh] bg-gray-800 bg-opacity-70 flex justify-center items-center z-50 h-[100vh] overflow-y-scroll",children:(0,d.jsxs)("div",{className:"bg-[#202020] mt-[60vh] p-4 rounded-lg w-[90%] md:w-[400px]",children:[(0,d.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-white mb-2",children:"Filter"}),(0,d.jsx)("button",{onClick:c,className:"text-red-400 font-bold float-right cursor-pointer text-lg",children:"X"})]}),(0,d.jsx)("input",{type:"text",placeholder:"Search by nft number",value:n,onChange:f,className:"p-1 rounded outline-none bg-gray-300 border-none mt-6 w-full"}),(0,d.jsxs)("div",{className:" md:block  mt-6 justify-between items-center cursor-pointer",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(p,{onClickHandler:x,value:"all",title:"All"}),(0,d.jsx)(p,{onClickHandler:x,value:"listed",title:"Listed"}),(0,d.jsx)(p,{onClickHandler:x,value:"hasoffers",title:"Has Offers"})]}),(0,d.jsxs)("div",{className:"flex gap-4 items-center justify-between mt-4",children:[(0,d.jsx)("button",{onClick:s,disabled:0===l,className:"px-4 py-1 bg-transparent border text-white rounded "+(0===l?"opacity-50 cursor-not-allowed":""),children:"Previous"}),(0,d.jsx)("button",{onClick:t,disabled:l>=i-1,className:"px-4 py-1 bg-transparent border text-white rounded "+(l>=i-1?"opacity-50 cursor-not-allowed":""),children:"Next"})]})]}),(0,d.jsxs)("select",{value:a,onChange:h,className:"mt-4 block bg-gray-300 text-black w-full p-2 border rounded",children:[(0,d.jsx)("option",{value:"lowtohigh",children:"Price Low to High"}),(0,d.jsx)("option",{value:"hightolow",children:"Price High to Low"})]}),(0,d.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,d.jsx)("span",{className:"text-white",children:"Price"}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("input",{type:"text",placeholder:"Min",value:j,onChange:w,className:"p-1 rounded border-none bg-gray-300 outline-none text-black",required:!0}),(0,d.jsx)("input",{type:"text",placeholder:"Max",value:g,onChange:b,className:"p-1 rounded bg-gray-300 border-none outline-none text-black",required:!0})]}),(0,d.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,d.jsx)("span",{className:"text-white",children:"Traits"}),(0,d.jsx)(u.A,{traitsData:N,handleOptionClick:y,handleSectionClick:S,expandedSections:C,selectedOptions:k,setExpandedSections:P,setSelectedOptions:O})]})]})]})})]})};var g=t(4230),j=t(3248),b=t(3747),w=t(1726);const N="ic"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DFX_NETWORK?"https://ic0.app":"http://localhost:4943",y=new i.qB({host:N,retryTimes:10}),S=()=>{const{collectionID:e}=(0,n.g)(),[l,t]=(0,s.useState)(null),[i,r]=(0,s.useState)(""),[u,v]=(0,s.useState)("lowtohigh"),[p,m]=(0,s.useState)("listed"),[N,S]=(0,s.useState)(""),[C,k]=(0,s.useState)(""),[P,O]=(0,s.useState)(!0),[M,L]=(0,s.useState)(0),[D,E]=(0,s.useState)({}),[_,T]=(0,s.useState)([]),H=e=>{E((l=>({...l,[e]:!l[e]})))},I=(e,l,t)=>{T((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]))},[q,A]=(0,s.useState)(!0),[F,K]=(0,s.useState)(!1),W=(0,j.jE)(),{data:z}=(0,b.I)({queryKey:["bulkData"]}),{data:R}=(0,b.I)({queryKey:["allTokens"]}),{data:U}=(0,b.I)({queryKey:["listedNfts"]}),{data:B,isLoading:Q}=(0,b.I)({queryKey:["myTokens"]}),{data:V,isLoading:X}=(0,b.I)({queryKey:["collectionDetails"]});console.log("genes :",w.A),(0,s.useEffect)((()=>{(async()=>{O(!0);try{var l,i,s;const n=(0,o.M)(a.WC,g.c,y),r=a.Oq.find((l=>l.canisterId===e)),d=await(null===n||void 0===n?void 0:n.get_all_listed_nfts()),c=(null===d||void 0===d||null===(l=d.data[0])||void 0===l?void 0:l.filter((l=>l[1].nft_canister==e)))||[],x=null===c||void 0===c?void 0:c.map((e=>[e[1].nft_id,{locked:[],seller:e[1].seller_principal,price:e[1].nft_price,inhouse_sale:!0}]));let u=null===z||void 0===z?void 0:z.find((l=>l[0]==e)),h=null===V||void 0===V?void 0:V.find((l=>l.canisterId==e));const v=[...x],p=Object.fromEntries(v.map((e=>[e[0],e]))),m=null===(i=u[1])||void 0===i||null===(s=i.allNftTokens)||void 0===s?void 0:s.map((e=>p[e[0]]?p[e[0]]:e));console.log("all ttt :",m),W.setQueryData(["myTokens"],m),r&&t({imgUrl:null===h||void 0===h?void 0:h.imgUrl,canisterId:null===h||void 0===h?void 0:h.canisterId,name:null===h||void 0===h?void 0:h.name,description:null===h||void 0===h?void 0:h.description,volume:null===h||void 0===h?void 0:h.volume,floorPrice:null===h||void 0===h?void 0:h.floorprice,totalListed:null===h||void 0===h?void 0:h.totalListed})}catch(n){console.error("Error loading NFT data:",n)}finally{O(!1)}})()}),[e]);const G=e=>S(e.target.value),$=e=>k(e.target.value);console.log(p,N);const J=(0,s.useMemo)((()=>{var l;let t=(null===U||void 0===U?void 0:U.length)>0?[...U]:[];var s,n,a,o,r;"listed"===p?t=null===(s=t)||void 0===s?void 0:s.filter((e=>{var l;return null===(l=e[1])||void 0===l?void 0:l.hasOwnProperty("price")})):"all"===p&&(t=B,console.log("all tokens :",B));i&&(t=null===(n=t)||void 0===n?void 0:n.filter((e=>{var l;return null===(l=e[0])||void 0===l?void 0:l.toString().toLowerCase().includes(i.toLowerCase())})));N&&(t=null===(a=t)||void 0===a?void 0:a.filter((e=>{var l;return Number(null===(l=e[1])||void 0===l?void 0:l.price)/1e8>=parseFloat(N)})));C&&(t=null===(o=t)||void 0===o?void 0:o.filter((e=>{var l;return Number(null===(l=e[1])||void 0===l?void 0:l.price)/1e8<=parseFloat(C)})));u&&(null===(r=t)||void 0===r||r.sort(((e,l)=>"lowtohigh"===u?Number(e[1].price)-Number(l[1].price):Number(l[1].price)-Number(e[1].price))));if(_.length>0){var c;const e=Object.keys(w.A).filter((e=>{const l=w.A[e];return _.some((e=>l.includes(e)))}));console.log("filteredByTraits",e),t=null===(c=t)||void 0===c?void 0:c.filter((l=>e.includes(l[0].toString())))}const h=50*M,v=h+50;return null===(l=t)||void 0===l?void 0:l.slice(h,v).map(((l,t)=>(0,d.jsx)(x.A,{nft:l,collectionID:e},t)))}),[U,R,i,u,p,N,C,M,_]),Y=Math.ceil((null===B||void 0===B?void 0:B.length)/50);return console.log("total pages :",Y),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"flex flex-col mx-4 min-h-screen md:mx-20 mt-[10px]",children:[(0,d.jsx)(c,{collectionData:l,isLoading:Q}),(0,d.jsx)(f,{prevPage:()=>{M>0&&L((e=>e-1))},nextPage:()=>{console.log("current page :",M,Y),M<Y-1&&L((e=>e+1))},currentPage:M,sortPrice:u,pages:Y,searchQuery:i,isModalOpen:F,closeModal:()=>K(!1),maxPrice:C,minPrice:N,handleMaxPriceChange:$,handleMinPriceChange:G,toggleSidebar:()=>{window.innerWidth<768?K(!0):A((e=>!e))},handleSearchChange:e=>r(e.target.value),handleSortPriceChange:e=>v(e.target.value),handlelistedChange:e=>m((l=>e.target.value)),traitsData:a.SE,handleOptionClick:I,handleSectionClick:H,expandedSections:D,selectedOptions:_,setExpandedSections:E,setSelectedOptions:T}),(0,d.jsx)(h,{results:J,isLoading:Q,maxPrice:C,minPrice:N,isSidebarOpen:q,isModalOpen:F,handleMaxPriceChange:$,handleMinPriceChange:G,closeModal:()=>K(!1),collectionID:e,traitsData:a.SE,handleOptionClick:I,handleSectionClick:H,expandedSections:D,selectedOptions:_})]})})}}}]);
//# sourceMappingURL=961.e7e73cb5.chunk.js.map