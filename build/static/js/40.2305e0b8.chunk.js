"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[40],{8657:(e,t,s)=>{s.d(t,{A:()=>p});var i=s(7097),r=s(5043),l=s(1935),n=s(2198),a=s(8247),o=s(2013),c=s(3216),d=s(39),u=s(1699),x=s(4230),f=s(4186),m=s(579);const p=e=>{let{nftid:t,nft_price:s,userP:p}=e;const[h,v]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),[j,y]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),{invalidateListings:_,invalidateUserNfts:S,invalidateUserBalance:k}=(0,o.A)(),O=(0,d.fJ)(),{user:C}=(0,d._d)(),T=async(e,t)=>{y(e),N(t),b(!0),setTimeout((()=>b(!1)),3e3)},M=(0,c.Zp)(),{mutateAsync:A}=(0,i.n)({mutationFn:()=>D(),onSuccess:async()=>{_(),S(),k(),v(!1)}}),D=async()=>{try{if(!C||!O)return void T("Log in first to purchase this NFT","error");let e=(0,u.M)(l.WC,x.c,O);const i=(0,u.M)(l.tc,f.c,O);v(!0);let r=await i.icrc2_approve({fee:[],memo:[],from_subaccount:[],created_at_time:[],amount:Number(s)+2e4,expected_allowance:[],expires_at:[],spender:{owner:n.Principal.fromText(l.WC),subaccount:[]}});console.log("approve results :",r);let a=await e.buy_nft(t);200==a.status&&"Ok"==a.status_text?T("NFT purchase successful","success"):T(a.error_text,"error"),console.log("buy results :",a)}catch(e){console.log("error in buying nft :",e)}M("/profile")};return(0,m.jsxs)(m.Fragment,{children:[g&&(0,m.jsx)("div",{className:"absolute top-10 z-50 text-xs  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===w?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,m.jsx)("div",{className:"modal-message",children:(0,m.jsx)("p",{children:j})})}),(0,m.jsx)("button",{onClick:()=>A(),className:"flex w-full bg-[#2E8DEE] rounded-b-lg mt-4 font-bold text-white justify-center items-center p-2",children:h?(0,m.jsx)(a.A,{size:20,color:"white"}):"Buy"})]})}},9040:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var i=s(3747),r=s(7097),l=s(5043),n=s(3216),a=s(1289),o=s(8247),c=s(826),d=s(7586),u=s(1935),x=s(4230),f=s(1699),m=s(8973),p=s(39),h=s(4186),v=s(2198),g=s(579);const b=e=>{let{nftid:t,nft_price:s,handleTrigger:i}=e;const[n,a]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),[b,j]=(0,l.useState)(""),[y,w]=(0,l.useState)(""),[N,_]=(0,l.useState)(!1),[S,k]=(0,l.useState)(""),[O,C]=(0,l.useState)(""),{user:T}=(0,p._d)(),M=(0,p.fJ)({retryTimes:2}),A=async(e,t)=>{k(e),C(t),_(!0),setTimeout((()=>_(!1)),3e3)},{mutateAsync:D}=(0,r.n)({mutationFn:e=>(async e=>{e.preventDefault(),d(!0);try{if(!T||!M)return;let e=(0,f.M)(u.WC,x.c,M);const s=(0,f.M)(u.tc,h.c,M);let r=await s.icrc2_approve({fee:[],memo:[],from_subaccount:[],created_at_time:[],amount:Number(1e8*b)+2e4,expected_allowance:[],expires_at:[],spender:{owner:v.Principal.fromText(u.WC),subaccount:[]}});console.log("apprive results :",r);let l=(0,u.N1)(y),n=await(null===e||void 0===e?void 0:e.place_offer_on_nft(t,Number(1e8*b),l));200==n.status&&"Ok"==n.status_text?A("Offer place successfully","success"):A(n.error_text,"error"),i(),console.log("offer results here:",n)}catch(s){console.log("error in placing offer :",s)}})(e),onSuccess:async()=>{d(!1)}});return(0,g.jsxs)("div",{className:"flex bg-[#2c2d2e] w-1/2 rounded-lg mt-4 font-bold text-white justify-center items-center p-2 cursor-pointer",children:[(0,g.jsx)("button",{onClick:()=>a(!0),children:"Make Offer"}),n&&(0,g.jsxs)("div",{className:"fixed inset-0 p-4 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[N&&(0,g.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===O?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,g.jsx)("div",{className:"modal-message",children:(0,g.jsx)("p",{children:S})})}),(0,g.jsxs)("div",{className:"bg-[#252525] rounded-lg shadow-lg p-6 w-96",children:[(0,g.jsxs)("div",{className:"flex justify-between ",children:[(0,g.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Make Offer"}),(0,g.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>a(!1)})]}),(0,g.jsxs)("form",{onSubmit:D,children:[(0,g.jsx)("label",{className:"block mb-2",htmlFor:"price",children:"Enter Offer amount"}),(0,g.jsx)("input",{type:"number",id:"price",placeholder:"enter offer amount",value:b,onChange:e=>j(e.target.value),className:" border border-white text-sm text-black rounded p-1 w-full mb-4",required:!0}),(0,g.jsx)("input",{type:"number",id:"price",value:y,placeholder:"enter number of days",onChange:e=>w(e.target.value),className:" border border-white text-sm text-black rounded p-1 w-full mb-4",required:!0}),(0,g.jsx)("div",{className:"flex justify-end",children:c?(0,g.jsx)(o.A,{color:"white",size:20}):(0,g.jsx)("button",{type:"submit",className:"px-4 py-2 bg-white text-black rounded",children:"Place Offer"})})]})]})]})]})};var j=s(2013);const y=e=>{let{history:t}=e;const s=e=>`${null===e||void 0===e?void 0:e.slice(0,6)}...${null===e||void 0===e?void 0:e.slice(-4)}`;return(0,g.jsxs)("div",{className:"overflow-x-auto bg-[#1B1B1B] p-2 rounded-lg border border-gray-400 h-[200px] md:h-[400px]",children:[(0,g.jsx)("h3",{className:"text-lg",children:"Activity"}),(0,g.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,g.jsx)("thead",{className:"",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Buyer"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Seller"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,g.jsx)("tbody",{className:" divide-y divide-gray-200",children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map(((e,t)=>{var i,r,l;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s(null===e||void 0===e||null===(i=e.buyer)||void 0===i?void 0:i.toString())}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s(null===e||void 0===e||null===(r=e.seller)||void 0===r?void 0:r.toString())}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:Number(null===e||void 0===e?void 0:e.price)/1e8}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(l=null===e||void 0===e?void 0:e.time,new Date(Number(l)/1e6).toLocaleString())})]},t)})):(0,g.jsx)("div",{className:"text-xs flex justify-center items-center ",children:"No activity available"})})]})]})};var w=s(3248);const N=e=>{let{offers:t,nft:s,nftOwner:i,handleTrigger:r}=e;const a=(0,p.fJ)(),{user:c}=(0,p._d)(),d=(0,n.Zp)(),h=(0,w.jE)(),[v,b]=(0,l.useState)(!1),[j,y]=(0,l.useState)(!1),[N,_]=(0,l.useState)(null),[S,k]=(0,l.useState)(!1),[O,C]=(0,l.useState)(!1),[T,M]=(0,l.useState)(!1),[A,D]=(0,l.useState)(""),[E,F]=(0,l.useState)(""),I=async(e,t)=>{D(e),F(t),M(!0),setTimeout((()=>M(!1)),3e3)};return(0,g.jsxs)("div",{className:"overflow-x-auto mb-10 bg-[#1B1B1B] p-2 rounded-lg border border-gray-400",children:[v&&(0,g.jsxs)("div",{className:"fixed inset-0 p-4 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[T&&(0,g.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===E?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,g.jsx)("div",{className:"modal-message",children:(0,g.jsx)("p",{children:A})})}),(0,g.jsxs)("div",{className:"bg-[#252525] rounded-lg flex flex-col items-center justify-center gap-1 shadow-lg p-6 w-96",children:[(0,g.jsxs)("div",{className:"flex  w-full justify-between ",children:[(0,g.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Cancel Offer"}),(0,g.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>b(!1)})]}),(0,g.jsx)("span",{children:"Proceed to cancel offer?"}),j?(0,g.jsx)(o.A,{color:"white",size:20}):(0,g.jsx)("button",{onClick:()=>(async()=>{try{y(!0);let e=(0,f.M)(u.WC,x.c,a);if(!e||!N)return;console.log(N);let t=await(null===e||void 0===e?void 0:e.cancel_offer(null===N||void 0===N?void 0:N.offer.offer_id,null===N||void 0===N?void 0:N.nft));200==t.status&&"Ok"==t.status_text?I("Offer cancelled successfully","success"):I(t.error_text,"error"),r()}catch(e){console.log("error in canceling offer :",e)}b(!1),y(!1)})(),className:"flex w-1/2 mt-2 justify-center items-center  bg-red-500 p-1 rounded-lg",children:"Confirm"})]})]}),S&&(0,g.jsxs)("div",{className:"fixed inset-0 p-4 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[T&&(0,g.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===E?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,g.jsx)("div",{className:"modal-message",children:(0,g.jsx)("p",{children:A})})}),(0,g.jsxs)("div",{className:"bg-[#252525] rounded-lg flex flex-col items-center justify-center gap-1 shadow-lg p-6 w-96",children:[(0,g.jsxs)("div",{className:"flex  w-full justify-between ",children:[(0,g.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Accept Offer"}),(0,g.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>k(!1)})]}),(0,g.jsx)("span",{children:"Confirm offer?"}),O?(0,g.jsx)(o.A,{color:"white",size:20}):(0,g.jsx)("button",{onClick:()=>(async()=>{try{C(!0);let e=(0,f.M)(u.WC,x.c,a);if(!e||!N)return;console.log("selected offer :",N);let t=await(null===e||void 0===e?void 0:e.accept_offer(N.nft,N.offer.offer_id));console.log("accept nft sale :",t),200==t.status&&"Ok"==t.status_text?I("NFT sold successfully","success"):I(t.error_text,"error"),h.setQueryData(["refreshData"],Math.random())}catch(e){console.log("error in accepting offer :",e)}C(!1),k(!1),d("/")})(),className:"flex w-1/2 mt-2 justify-center items-center  bg-green-500 p-1 rounded-lg",children:"Confirm"})]})]}),(0,g.jsx)("h3",{className:"text-lg",children:"Offers"}),(0,g.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,g.jsx)("thead",{className:"",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Date"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,g.jsx)("tbody",{className:" divide-y divide-gray-200",children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map(((e,t)=>{var r,l,n,a,o,d;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(d=null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.toString(),`${null===d||void 0===d?void 0:d.slice(0,6)}...${null===d||void 0===d?void 0:d.slice(-4)}`)}),(0,g.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:[Number(null===e||void 0===e?void 0:e.amount)/1e8," ICP"]}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(o=Number(null===e||void 0===e?void 0:e.expiry_date),new Date(Number(o)/1e6).toLocaleString())}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[c&&(null===c||void 0===c||null===(l=c.principal)||void 0===l?void 0:l.toString())==(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.toString())&&(0,g.jsx)("button",{onClick:()=>{_({offer:e,nft:s}),b(!0)},className:"flex  bg-red-500 p-1 rounded-lg",children:"Cancel"}),c&&(null===c||void 0===c||null===(a=c.principal)||void 0===a?void 0:a.toString())==i&&(0,g.jsx)("button",{onClick:()=>{_({offer:e,nft:s}),k(!0)},className:"flex bg-green-500 p-1 rounded-lg",children:"Accept"})]})})]},t)})):(0,g.jsx)("div",{className:"flex w-full justify-center items-center text-xs mt-3",children:" No offers available"})})]})]})};var _=s(2188);const S=e=>{let{collectionID:t,nftID:s,nftPrice:r,nftDetails:n}=e;const[a,o]=(0,l.useState)([]),{data:c,isLoading:d}=(0,i.I)({queryKey:["myTokens"]});return(0,l.useEffect)((()=>{(async()=>{try{console.log(" gg sd :",c);let e=null===c||void 0===c?void 0:c.slice(0,4),s=null===e||void 0===e?void 0:e.map(((e,s)=>(0,g.jsx)(_.A,{nft:e,collectionID:t},s)));console.log("price range :",e),o(s)}catch(e){console.log("error in getting more nfts :",e)}})()}),[n]),(0,g.jsxs)("div",{className:"flex flex-col w-full",children:[(0,g.jsx)("div",{className:"flex w-full items-center justify-center",children:"More NFTS from this collection"}),(0,g.jsx)("div",{className:"flex flex-col w-full",children:(0,g.jsx)("div",{className:"flex flex-row w-full",children:(0,g.jsx)("div",{className:"flex-grow w-full flex mt-6 justify-center items-center flex-wrap",children:a})})})]})};s(2126);var k=s(5772),O=s(6551),C=s(8063),T=(s(2420),s(8657));const M={wrapper:"flex gap-3 mt-[80px] flex-col md:flex-row justify-center bg-[#121212] h-screen p-4 text-white",leftwrapper:"flex flex-col  items-center md:items-start  mb-4 md:mb-0",rightwrapper:"flex flex-col   h-full",nftImg:" rounded-md ml-3 w-auto cursor-pointer"},A=()=>{var e,t,s;const{colID:m,nftID:h}=(0,n.g)(),[v,w]=(0,l.useState)(null),[_,A]=(0,l.useState)(""),[D,E]=(0,l.useState)(!1),[F,I]=(0,l.useState)(!1),[P,R]=(0,l.useState)(!1),[B,K]=(0,l.useState)(!1),[z,L]=(0,l.useState)(""),W=(0,n.Zp)(),{user:$}=(0,p._d)(),{data:q}=(0,i.I)({queryKey:["marketplaceActor"]}),{data:U,isLoading:Z}=(0,i.I)({queryKey:["myTokens"]}),{data:X}=(0,i.I)({queryKey:["bulkData"]}),H="ic"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DFX_NETWORK?"https://ic0.app":"http://localhost:4943",J=new c.qB({host:H,retryTimes:10}),Q=((0,f.M)(m,d.c,J),(0,f.M)(u.WC,x.c,J)),[G,V]=(0,l.useState)(null),[Y,ee]=(0,l.useState)(!1),[te,se]=(0,l.useState)(""),[ie,re]=(0,l.useState)(""),{invalidateListings:le}=(0,j.A)(),ne=async(e,t)=>{se(e),re(t),ee(!0),setTimeout((()=>ee(!1)),3e3)},ae=e=>L(Math.random()),oe=(0,l.useMemo)((()=>m&&h?(0,a.TZ)(h,m):null),[m,h]),ce=(0,l.useMemo)((()=>null===U||void 0===U?void 0:U.find((e=>e[0]==h))),[U,h]);(0,l.useEffect)((()=>{(async()=>{try{var e,t;if(!m||!h)return;console.log("ddd"),K(!0);let r=(0,f.M)(u.qY,d.c,J),l=await(null===Q||void 0===Q?void 0:Q.get_nft_sale_history(oe)),n=null===(e=(null===X||void 0===X?void 0:X.find((e=>e[0]==m)))[1])||void 0===e||null===(t=e.transactions)||void 0===t?void 0:t.filter((e=>(null===e||void 0===e?void 0:e.token)==oe));if(console.log("ccc :",U),l.data.length>0?V([...n,...null===l||void 0===l?void 0:l.data[0]]):V([...n]),(null===ce||void 0===ce?void 0:ce.length)>0)if(ce[1].hasOwnProperty("metadata")){await r.ext_bearer(oe)}else if(ce[1].inhouse_sale){let e=await(null===Q||void 0===Q?void 0:Q.get_listed_nft_details(oe));200===e.status&&"Ok"===e.status_text&&w(e.data[0])}else{var s,i;w({seller_principal:null===(s=ce[1].seller)||void 0===s?void 0:s.toString(),nft_price:null===(i=ce[1])||void 0===i?void 0:i.price,token_identifier:(0,a.TZ)(ce[0],m)})}}catch(r){console.log("error in fetching details :",r)}K(!1)})()}),[m,h,z]);const{mutateAsync:de}=(0,r.n)({mutationFn:e=>ue(e),onSuccess:async()=>{le(),W("../profile")}}),ue=async e=>{if(e.preventDefault(),v){I(!0);try{let e=await q.un_list_nft(v.token_identifier);console.log("unlisting res :",e),200==e.status&&"Ok"==e.status_text?ne("NFT unlisted successfully","success"):ne(e.error_text[0],"error")}catch(t){console.log("error in unlisting token :",t)}}},{mutateAsync:xe}=(0,r.n)({mutationFn:e=>fe(e),onSuccess:async()=>{le(),I(!1)}}),fe=async e=>{if(e.preventDefault(),console.log("new price : ",_),!_||0==_)return;R(!0);let t=await(null===q||void 0===q?void 0:q.update_nft_price(v.token_identifier,parseInt(1e8*_)));200==t.status&&"Ok"==t.status_text?ne("price updated successfully","success"):ne(t.error_text,"error"),console.log("update price results :",t),R(!1)};return(0,g.jsxs)("div",{className:"flex w-full min-h-screen gap-4 flex-col text-white mr-6 pr-6 md:px-20 mt-[100px]",children:[(0,g.jsxs)("div",{className:"flex w-full h-full flex-col md:flex-row gap-2 mx-4",children:[(0,g.jsxs)("div",{className:"flex flex-col gap-4 w-full md:w-1/2 h-full md:items-start  mb-4 md:mb-0",children:[(0,g.jsx)("div",{className:"rounded-lg p-1 w-full flex border border-gray-400 pt-3 flex-col",children:(0,g.jsx)("img",{src:`https://${m}.raw.icp0.io/?tokenid=${(0,a.TZ)(h,m)}&type=thumbnail`,alt:"",className:M.nftImg})}),(0,g.jsxs)("div",{className:"flex flex-col w-full items-start",children:[(0,g.jsx)("h1",{children:"Traits"}),(0,g.jsx)("span",{className:"text-sm",children:"Coming Soon ..."})]})]}),(0,g.jsx)("div",{className:"flex  justify flex-col w-full md:w-1/2 ",children:(0,g.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,g.jsxs)("h1",{className:"text-[30px] font-bold",children:[v&&"ICKitties"," # ",h]}),(0,g.jsxs)("span",{children:["Owned by ",null===v||void 0===v||null===(e=v.seller_principal)||void 0===e?void 0:e.toString()]}),(null===v||void 0===v?void 0:v.nft_price)&&(0,g.jsxs)("div",{className:"flex flex-col  xs:px-3 md:px-0 gap-4 w-full",children:[(0,g.jsxs)("div",{className:"flex  flex-col w-full gap-1  bg-[#1B1B1B] border border-gray-400 p-2 rounded-lg",children:[(0,g.jsx)("h3",{children:"Current Price"}),(0,g.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,g.jsx)("img",{src:C,height:"7px",width:"15px"}),(0,g.jsx)("span",{className:"flex text-lg",children:v&&(Number(null===v||void 0===v?void 0:v.nft_price)/1e8).toFixed(2)})]}),B?(0,g.jsx)("div",{className:"flex w-full justify-center items-center",children:(0,g.jsx)(o.A,{size:20,color:"white"})}):$&&$.principal.toString()==(null===v||void 0===v||null===(t=v.seller_principal)||void 0===t?void 0:t.toString())?(0,g.jsxs)("div",{className:"flex flex-row gap-4 justify-center items-center w-full",children:[(0,g.jsx)(k.A,{nft:null===v||void 0===v?void 0:v.token_identifier}),(0,g.jsx)(O.A,{nft:null===v||void 0===v?void 0:v.token_identifier,handleTrigger:ae})]}):(0,g.jsxs)("div",{className:"flex flex-row gap-4 w-full",children:[(0,g.jsx)(T.A,{nft_price:Number(null===v||void 0===v?void 0:v.nft_price),nftid:null===v||void 0===v?void 0:v.token_identifier}),(0,g.jsx)(b,{nft_price:Number(null===v||void 0===v?void 0:v.nft_price),nftid:null===v||void 0===v?void 0:v.token_identifier,handleTrigger:ae})]})]}),(0,g.jsx)(y,{history:G}),(0,g.jsx)(N,{offers:null===v||void 0===v?void 0:v.offers,nft:null===v||void 0===v?void 0:v.token_identifier,nftOwner:null===v||void 0===v||null===(s=v.seller_principal)||void 0===s?void 0:s.toString(),handleTrigger:ae})]})]})})]}),v&&(0,g.jsx)(S,{nftDetails:v,collectionID:m,nftID:h,nftPrice:Number(null===v||void 0===v?void 0:v.nft_price)/1e8})]})}},2188:(e,t,s)=>{s.d(t,{A:()=>o});s(5043);var i=s(8657),r=s(1289),l=s(3216),n=s(8063),a=s(579);const o=e=>{var t,s,o;let{collectionID:c,nft:d}=e;const u=(0,l.Zp)();return(0,a.jsxs)("div",{className:" rounded bg-[#202020] w-[250px] m-2 rounded-b-lg",children:[(0,a.jsx)("img",{onClick:()=>u("../marketplace/"+c+"/"+d[0]),src:`https://${c}.raw.icp0.io/?tokenid=${(0,r.TZ)(d[0],c)}&type=thumbnail`,alt:"NFT",className:"w-[100%] ml-[2.5px] cursor-pointer  object-cover rounded mb-2"}),(0,a.jsxs)("div",{className:"flex w-full px-2 justify-between",children:[(0,a.jsxs)("p",{children:["#",d[0]]}),null!==(t=d[1])&&void 0!==t&&t.price?(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("img",{src:n,height:"7px",width:"15px",alt:"logo"}),(0,a.jsx)("span",{children:null===(s=Number(null===(o=d[1])||void 0===o?void 0:o.price)/1e8)||void 0===s?void 0:s.toFixed(2)})]}):"unlisted"]}),(0,a.jsx)("div",{className:`opacity-0 ${void 0!=d[1].price&&"hover:opacity-100"} transition-opacity duration-300`,children:(0,a.jsx)(i.A,{nftid:d[0],nft_price:Number(d[1].nft_price),userP:d[1].seller_principal})})]},d.id)}},8063:(e,t,s)=>{e.exports=s.p+"static/media/icplogo.71d22b69911f6dedf410.png"},7097:(e,t,s)=>{s.d(t,{n:()=>u});var i=s(5043),r=s(5239),l=s(1454),n=s(329),a=s(9723),o=class extends n.Q{#e;#t=void 0;#s;#i;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,a.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,a.EN)(t.mutationKey)!==(0,a.EN)(this.options.mutationKey)?this.reset():"pending"===this.#s?.state.status&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#l(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#l()}mutate(e,t){return this.#i=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#r(){const e=this.#s?.state??(0,r.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#l(e){l.j.batch((()=>{if(this.#i&&this.hasListeners()){const t=this.#t.variables,s=this.#t.context;"success"===e?.type?(this.#i.onSuccess?.(e.data,t,s),this.#i.onSettled?.(e.data,null,t,s)):"error"===e?.type&&(this.#i.onError?.(e.error,t,s),this.#i.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach((e=>{e(this.#t)}))}))}},c=s(3248),d=s(3247);function u(e,t){const s=(0,c.jE)(t),[r]=i.useState((()=>new o(s,e)));i.useEffect((()=>{r.setOptions(e)}),[r,e]);const n=i.useSyncExternalStore(i.useCallback((e=>r.subscribe(l.j.batchCalls(e))),[r]),(()=>r.getCurrentResult()),(()=>r.getCurrentResult())),a=i.useCallback(((e,t)=>{r.mutate(e,t).catch(d.l)}),[r]);if(n.error&&(0,d.G)(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:a,mutateAsync:n.mutate}}}}]);
//# sourceMappingURL=40.2305e0b8.chunk.js.map