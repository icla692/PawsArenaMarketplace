"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[961],{961:(e,l,t)=>{t.r(l),t.d(l,{default:()=>P});var i=t(826),n=t(5043),s=t(3216),a=t(1935),o=t(1699),r=t(8247),d=t(579);const c=e=>{var l;let{collectionData:t,isLoading:i}=e;const[s,a]=(0,n.useState)(!1);return console.log("dddd :",t),(0,d.jsxs)("div",{className:"flex flex-col mt-[80px]",children:[t?(0,d.jsx)("div",{className:"relative rounded w-full object-cover mx-auto",children:(0,d.jsxs)("div",{className:"overflow-hidden h-[200px] w-full",children:[(0,d.jsx)("img",{src:null===t||void 0===t?void 0:t.imgUrl,alt:null===t||void 0===t?void 0:t.name,className:"w-full rounded-lg h-full object-cover"}),(0,d.jsx)("div",{className:"absolute bottom-0 left-0 right-0 text-white p-2",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-end",children:[(0,d.jsx)("h2",{className:"text-xl font-bold",children:null===t||void 0===t?void 0:t.name}),(0,d.jsxs)("div",{className:"flex  flex-row justify-between gap-4 mt-1",children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{children:"Volume"}),(0,d.jsxs)("span",{children:[(Number(null===t||void 0===t?void 0:t.volume)/1e11).toFixed(2),"k"]})]}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{children:"Listings"}),(0,d.jsx)("span",{children:Number(null===t||void 0===t?void 0:t.totalListed)})]}),(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{children:"Floor Price"}),(0,d.jsx)("span",{children:(Number(null===t||void 0===t?void 0:t.floorPrice)/1e8).toFixed(2)})]})]})]})})]})},null===t||void 0===t?void 0:t.canisterId):(0,d.jsx)("div",{className:"flex flex-col mt-[80px] justify-center items-center",children:(0,d.jsx)(r.A,{size:25,color:"white"})}),t&&(0,d.jsxs)("div",{className:"mx-4 p-4 flex flex-col justify-center items-center",children:[(0,d.jsx)("div",{className:"text-white text-center",children:s?null===t||void 0===t?void 0:t.description:`${null===t||void 0===t||null===(l=t.description)||void 0===l?void 0:l.slice(0,150)}...`}),(0,d.jsx)("button",{onClick:()=>{a(!s)},className:"text-white text-md font-bold flex justify-center items-center hover:underline mt-2",children:s?"See Less":"See More"})]})]})};t(1289),t(8657);var u=t(893);var x=t(4158);const h=e=>{let{results:l,isSidebarOpen:t,isLoading:i,minPrice:n,maxPrice:s,handleMinPriceChange:a,handleMaxPriceChange:o,collectionID:c,traitsData:u,handleOptionClick:h,handleSectionClick:v,expandedSections:p,selectedOptions:m,setExpandedSections:f,setSelectedOptions:g}=e;return(0,d.jsxs)("div",{className:"flex  w-full  text-white gap-3 border-gray-400 p-2",children:[t&&(0,d.jsx)("div",{className:"hidden md:block border border-gray-600 p-4 w-1/4",children:(0,d.jsxs)("div",{className:"flex txt-black flex-col mt-4",children:[(0,d.jsx)("span",{children:"Price"}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("input",{type:"text",placeholder:"Min",value:n,onChange:a,className:"p-1 rounded text-black",required:!0}),(0,d.jsx)("input",{type:"text",placeholder:"Max",value:s,onChange:o,className:"p-1 rounded text-black",required:!0})]}),(0,d.jsx)("div",{className:"flex flex-col mt-4",children:"rw7qm-eiaaa-aaaak-aaiqq-cai"===c&&(0,d.jsx)(x.A,{traitsData:u,handleOptionClick:h,handleSectionClick:v,expandedSections:p,selectedOptions:m,setExpandedSections:f,setSelectedOptions:g})})]})}),(0,d.jsx)("div",{className:"flex flex-col w-full",children:(0,d.jsx)("div",{className:"flex flex-row w-full",children:(0,d.jsx)("div",{className:"flex-grow w-full flex  justify-center items-center flex-wrap",children:i?(0,d.jsx)(r.A,{size:25,color:"white"}):l})})})]})};var v=t(5394);const p=e=>{let{onClickHandler:l,value:t,title:i}=e;return(0,d.jsx)("button",{onClick:l,value:t,className:"btns",children:i})};var m=t(423);const f=e=>{let{currentPage:l,nextPage:t,pages:i,prevPage:n,searchQuery:s,sortPrice:a,isModalOpen:o,toggleSidebar:r,closeModal:c,handlelistedChange:u,handleSortPriceChange:h,handleSearchChange:f,maxPrice:g,minPrice:j,handleMaxPriceChange:b,handleMinPriceChange:N,traitsData:w,handleOptionClick:y,handleSectionClick:S,expandedSections:C,selectedOptions:k,setExpandedSections:P,setSelectedOptions:O}=e;return(0,d.jsxs)("div",{className:"flex flex-col w-full gap-4 p-2",children:[(0,d.jsxs)("div",{className:"flex mt-[05px] cursor-pointer border-b-[1px] pb-2 border-white flex-row justify-between items-center w-full",children:[(0,d.jsx)(v.n6t,{size:35,color:"white",onClick:r}),(0,d.jsxs)("div",{className:"hidden md:block relative ",children:[(0,d.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,d.jsx)(m.uG9,{color:"gray",size:25})}),(0,d.jsx)("input",{type:"text",className:"hidden md:block bg-transparent border outline-none border-gray-300 text-white rounded-lg w-full pl-10 p-2.5",placeholder:"Search by NFT number",onChange:f,value:s})]}),(0,d.jsx)("div",{className:"hidden md:flex md:flex-row gap-2",children:(0,d.jsxs)("select",{value:a,onChange:h,className:" block bg-transparent  text-white  w-full p-3 border rounded-lg",children:[(0,d.jsx)("option",{value:"lowtohigh",className:"bg-red-400",children:"Price Low to High"}),(0,d.jsx)("option",{value:"hightolow",children:"Price High to Low"}),(0,d.jsx)("option",{value:"rarityindexasc",children:"NFT Rarity Index(Asc)"}),(0,d.jsx)("option",{value:"rarityindexdesc",children:"NFT Rarity Index(Desc)"})]})})]}),(0,d.jsx)("div",{className:"hidden md:flex-row md:block justify-between items-center cursor-pointer",children:(0,d.jsxs)("div",{className:"flex flex-row justify-between items-center ",children:[(0,d.jsxs)("div",{className:"flex mt-4",children:[(0,d.jsx)(p,{onClickHandler:u,value:"all",title:"All"}),(0,d.jsx)(p,{onClickHandler:u,value:"listed",title:"Listed"})]}),(0,d.jsxs)("div",{className:"flex gap-4 items-center justify-center mt-4",children:[(0,d.jsx)("button",{onClick:n,disabled:0===l,className:"px-4 py-1 bg-transparent border text-white rounded "+(0===l?"opacity-50 cursor-not-allowed":""),children:"Previous"}),(0,d.jsx)("button",{onClick:t,disabled:l>=i-1,className:"px-4 py-1 bg-transparent border text-white rounded "+(l>=i-1?"opacity-50 cursor-not-allowed":""),children:"Next"})]})]})}),o&&(0,d.jsx)("div",{className:"fixed inset-0 mt-[10vh] bg-gray-800 bg-opacity-70 flex justify-center items-center z-50 h-[100vh] overflow-y-scroll",children:(0,d.jsxs)("div",{className:"bg-[#202020] mt-[60vh] p-4 rounded-lg w-[90%] md:w-[400px]",children:[(0,d.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-white mb-2",children:"Filter"}),(0,d.jsx)("button",{onClick:c,className:"text-red-400 font-bold float-right cursor-pointer text-lg",children:"X"})]}),(0,d.jsx)("input",{type:"text",placeholder:"Search by nft number",value:s,onChange:f,className:"p-1 rounded outline-none bg-gray-300 border-none mt-6 w-full"}),(0,d.jsxs)("div",{className:" md:block  mt-6 justify-between items-center cursor-pointer",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(p,{onClickHandler:u,value:"all",title:"All"}),(0,d.jsx)(p,{onClickHandler:u,value:"listed",title:"Listed"}),(0,d.jsx)(p,{onClickHandler:u,value:"hasoffers",title:"Has Offers"})]}),(0,d.jsxs)("div",{className:"flex gap-4 items-center justify-between mt-4",children:[(0,d.jsx)("button",{onClick:n,disabled:0===l,className:"px-4 py-1 bg-transparent border text-white rounded "+(0===l?"opacity-50 cursor-not-allowed":""),children:"Previous"}),(0,d.jsx)("button",{onClick:t,disabled:l>=i-1,className:"px-4 py-1 bg-transparent border text-white rounded "+(l>=i-1?"opacity-50 cursor-not-allowed":""),children:"Next"})]})]}),(0,d.jsxs)("select",{value:a,onChange:h,className:"mt-4 block bg-gray-300 text-black w-full p-2 border rounded",children:[(0,d.jsx)("option",{value:"lowtohigh",children:"Price Low to High"}),(0,d.jsx)("option",{value:"hightolow",children:"Price High to Low"})]}),(0,d.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,d.jsx)("span",{className:"text-white",children:"Price"}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("input",{type:"text",placeholder:"Min",value:j,onChange:N,className:"p-1 rounded border-none bg-gray-300 outline-none text-black",required:!0}),(0,d.jsx)("input",{type:"text",placeholder:"Max",value:g,onChange:b,className:"p-1 rounded bg-gray-300 border-none outline-none text-black",required:!0})]}),(0,d.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,d.jsx)("span",{className:"text-white",children:"Traits"}),(0,d.jsx)(x.A,{traitsData:w,handleOptionClick:y,handleSectionClick:S,expandedSections:C,selectedOptions:k,setExpandedSections:P,setSelectedOptions:O})]})]})]})})]})};var g=t(4230),j=t(7586),b=t(3747),N=t(3248),w=t(1726),y=t(1682);const S="ic"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DFX_NETWORK?"https://ic0.app":"http://localhost:4943",C=new i.qB({host:S,retryTimes:10});let k=(0,o.M)(a.WC,g.c,C);(0,o.M)(a.qY,j.c,C);const P=()=>{const{collectionID:e}=(0,s.g)(),[l,t]=(0,n.useState)(null),[i,o]=(0,n.useState)(""),[r,x]=(0,n.useState)("lowtohigh"),[v,p]=(0,n.useState)("all"),[m,g]=(0,n.useState)(""),[j,S]=(0,n.useState)(""),[C,P]=(0,n.useState)(!0),[O,M]=(0,n.useState)(0),[D,L]=(0,n.useState)([]),{data:E}=(0,b.I)({queryKey:["refreshData"]});console.log("refresh data :",E);const[I,T]=(0,n.useState)({}),[_,q]=(0,n.useState)({}),F=e=>{T((l=>({...l,[e]:!l[e]})))},H=(e,l,t)=>{q((l=>{const i={...l};return i[e]?i[e].includes(t)?(i[e]=i[e].filter((e=>e!==t)),0===i[e].length&&delete i[e]):i[e].push(t):i[e]=[t],i}))};console.log("Selected Options:",_);const[A,K]=(0,n.useState)(!0),[R,W]=(0,n.useState)(!1),z=(0,N.jE)(),{data:U}=(0,b.I)({queryKey:["bulkData"]}),{data:Q}=(0,b.I)({queryKey:["allTokens"]}),{data:B}=(0,b.I)({queryKey:["listedNfts"]}),{data:V,isLoading:X}=(0,b.I)({queryKey:["myTokens"]}),{data:G}=(0,b.I)({queryKey:["collectionDetails"]});(0,n.useEffect)((()=>{(async()=>{if(e){P(!0);try{var l,i,n;const s=a.Oq.find((l=>l.canisterId===e)),o=await(null===k||void 0===k?void 0:k.get_all_listed_nfts()),r=(null===o||void 0===o||null===(l=o.data[0])||void 0===l?void 0:l.filter((l=>l[1].nft_canister==e)))||[],d=null===r||void 0===r?void 0:r.map((e=>[e[1].nft_id,{locked:[],seller:e[1].seller_principal,price:e[1].nft_price,inhouse_sale:!0}]));let c=null===U||void 0===U?void 0:U.find((l=>l[0]==e)),u=null===G||void 0===G?void 0:G.find((l=>l.canisterId==e));const x=[...d],h=Object.fromEntries(x.map((e=>[e[0],e]))),v=null===(i=c[1])||void 0===i||null===(n=i.allNftTokens)||void 0===n?void 0:n.map((e=>h[e[0]]?h[e[0]]:e));z.setQueryData(["myTokens"],v),s&&t({imgUrl:null===u||void 0===u?void 0:u.imgUrl,canisterId:null===u||void 0===u?void 0:u.canisterId,name:null===u||void 0===u?void 0:u.name,description:null===u||void 0===u?void 0:u.description,volume:null===u||void 0===u?void 0:u.volume,floorPrice:null===u||void 0===u?void 0:u.floorprice,totalListed:null===u||void 0===u?void 0:u.totalListed})}catch(s){console.error("Error loading NFT data:",s)}finally{P(!1)}}})()}),[e,E]);const Y=e=>g(e.target.value),$=e=>S(e.target.value);console.log(v,m);const J=(0,n.useMemo)((()=>{var l;let t=(null===V||void 0===V?void 0:V.length)>0?[...V]:[];if(r)if("rarityindexasc"===r)t=null===V||void 0===V?void 0:V.sort(((e,l)=>y[e[0]]-y[l[0]]));else if("rarityindexdesc"===r)t=null===V||void 0===V?void 0:V.sort(((e,l)=>{const t=y[e[0]];return y[l[0]]-t}));else{var n;null===(n=t)||void 0===n||n.sort(((e,l)=>{var t,i,n,s;return"lowtohigh"===r?Number((null===(t=e[1])||void 0===t?void 0:t.price)||0)-Number((null===(i=l[1])||void 0===i?void 0:i.price)||0):Number((null===(n=l[1])||void 0===n?void 0:n.price)||0)-Number((null===(s=e[1])||void 0===s?void 0:s.price)||0)}))}var s,a,o,c,x;"listed"===v?t=null===(s=t)||void 0===s?void 0:s.filter((e=>{var l;return null===(l=e[1])||void 0===l?void 0:l.hasOwnProperty("price")})):"all"===v&&(t=V,console.log("all tokens :",V));m&&(t=null===(a=t)||void 0===a?void 0:a.filter((e=>{var l;return Number(null===(l=e[1])||void 0===l?void 0:l.price)/1e8>=parseFloat(m)})));j&&(t=null===(o=t)||void 0===o?void 0:o.filter((e=>{var l;return Number(null===(l=e[1])||void 0===l?void 0:l.price)/1e8<=parseFloat(j)})));i&&(t=null===(c=t)||void 0===c?void 0:c.filter((e=>{var l;return null===(l=e[0]+1)||void 0===l?void 0:l.toString().toLowerCase().includes(i.toLowerCase())})));r&&(null===(x=t)||void 0===x||x.sort(((e,l)=>"lowtohigh"===r?Number(e[1].price)-Number(l[1].price):Number(l[1].price)-Number(e[1].price))));if(Object.keys(_).length>0){var h;const e=Object.keys(w.A).filter((e=>{const l=w.A[e];return Object.keys(_).every((e=>_[e].some((e=>l.includes(e)))))}));t=null===(h=t)||void 0===h?void 0:h.filter((l=>e.includes(l[0].toString())))}const p=50*O,f=p+50;return null===(l=t)||void 0===l?void 0:l.slice(p,f).map(((l,t)=>(0,d.jsx)(u.A,{nft:l,collectionID:e},t)))}),[B,V,Q,i,r,v,m,j,O,_,E]),Z=Math.ceil((null===V||void 0===V?void 0:V.length)/50);return console.log("total pages :",Z),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"flex flex-col mx-4 min-h-screen md:mx-20 mt-[10px]",children:[(0,d.jsx)(c,{collectionData:l,isLoading:X}),(0,d.jsx)(f,{prevPage:()=>{O>0&&M((e=>e-1))},nextPage:()=>{console.log("current page :",O,Z),O<Z-1&&M((e=>e+1))},currentPage:O,sortPrice:r,pages:Z,searchQuery:i,isModalOpen:R,closeModal:()=>W(!1),maxPrice:j,minPrice:m,handleMaxPriceChange:$,handleMinPriceChange:Y,toggleSidebar:()=>{window.innerWidth<768?W(!0):K((e=>!e))},handleSearchChange:e=>o(e.target.value),handleSortPriceChange:e=>x(e.target.value),handlelistedChange:e=>p((l=>e.target.value)),traitsData:a.SE,handleOptionClick:H,handleSectionClick:F,expandedSections:I,selectedOptions:_,setExpandedSections:T,setSelectedOptions:q}),(0,d.jsx)(h,{results:J,isLoading:X,maxPrice:j,minPrice:m,isSidebarOpen:A,isModalOpen:R,handleMaxPriceChange:$,handleMinPriceChange:Y,closeModal:()=>W(!1),collectionID:e,traitsData:a.SE,handleOptionClick:H,handleSectionClick:F,expandedSections:I,selectedOptions:_})]})})}}}]);
//# sourceMappingURL=961.d6eb6c80.chunk.js.map