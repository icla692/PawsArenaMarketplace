"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[962],{1289:(e,t,s)=>{s.d(t,{T:()=>l});var r=s(2198);function l(e,t){let s=new Uint8Array([10,116,105,100]);const l=r.Principal.fromText(t).toUint8Array();s=new Uint8Array([...s,...l]);let i=e;for(let r=3;r>=0;r--){const e=Math.pow(2,8*r),t=Math.floor(i/e);s=new Uint8Array([...s,t]),i-=t*e}return r.Principal.fromUint8Array(s).toText()}},8657:(e,t,s)=>{s.d(t,{A:()=>x});var r=s(3747),l=s(7097),i=s(5043),n=s(1935),a=s(2198),o=s(8247),c=s(2013),d=s(3216),u=s(579);const x=e=>{let{nftid:t,nft_price:s,userP:x}=e;const[f,m]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!1),[h,v]=(0,i.useState)(""),[b,y]=(0,i.useState)(""),{invalidateListings:j,invalidateUserNfts:w,invalidateUserBalance:N}=(0,c.A)(),_=async(e,t)=>{v(e),y(t),g(!0),setTimeout((()=>g(!1)),3e3)},{data:S}=(0,r.I)({queryKey:["userPrincipal"]}),{data:k}=(0,r.I)({queryKey:["userIcpBalance"]}),{data:T}=(0,r.I)({queryKey:["allListings"]}),{data:A}=(0,r.I)({queryKey:["userNFTS"]}),{data:C}=(0,r.I)({queryKey:["nftActor"]}),{data:I}=(0,r.I)({queryKey:["marketplaceActor"]}),{data:F}=(0,r.I)({queryKey:["IcpActor"]}),O=(0,d.Zp)(),{mutateAsync:P}=(0,l.n)({mutationFn:()=>D(),onSuccess:async()=>{j(),w(),N(),m(!1)}}),D=async()=>{try{if(!I)return alert("Log in first to purchase this NFT"),void _("Log in first to purchase this NFT","error");m(!0);let e=await F.icrc2_approve({fee:[],memo:[],from_subaccount:[],created_at_time:[],amount:Number(s)+2e4,expected_allowance:[],expires_at:[],spender:{owner:a.Principal.fromText(n.WC),subaccount:[]}});console.log("approve results :",e);let r=await I.buy_nft(t);200==r.status&&"Ok"==r.status_text?_("NFT purchase successful","success"):_(r.error_text,"error"),console.log("buy results :",r)}catch(e){console.log("error in buying nft :",e)}O("/profile")};return(0,u.jsxs)(u.Fragment,{children:[p&&(0,u.jsx)("div",{className:"absolute top-10 z-50 text-xs  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===b?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,u.jsx)("div",{className:"modal-message",children:(0,u.jsx)("p",{children:h})})}),(0,u.jsx)("button",{onClick:()=>P(),className:"flex w-full bg-[#2E8DEE] rounded-b-lg mt-4 font-bold text-white justify-center items-center p-2",children:f?(0,u.jsx)(o.A,{size:20,color:"white"}):"Buy"})]})}},7670:(e,t,s)=>{s.r(t),s.d(t,{default:()=>I});var r=s(3747),l=s(7097),i=s(5043),n=s(3216),a=s(1289),o=s(826),c=s(7586),d=s(1935),u=s(4230),x=s(1699),f=s(5394),m=s(8973),p=s(8247),g=s(39),h=s(4186),v=s(2198),b=s(579);const y=e=>{let{nftid:t,nft_price:s,handleTrigger:r}=e;const[n,a]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1),[f,y]=(0,i.useState)(""),[j,w]=(0,i.useState)(""),[N,_]=(0,i.useState)(!1),[S,k]=(0,i.useState)(""),[T,A]=(0,i.useState)(""),{user:C}=(0,g._d)(),I=(0,g.fJ)({retryTimes:2}),F=async(e,t)=>{k(e),A(t),_(!0),setTimeout((()=>_(!1)),3e3)},{mutateAsync:O}=(0,l.n)({mutationFn:e=>(async e=>{e.preventDefault(),c(!0);try{if(!C||!I)return;let e=(0,x.M)(d.WC,u.c,I);const s=(0,x.M)(d.tc,h.c,I);let l=await s.icrc2_approve({fee:[],memo:[],from_subaccount:[],created_at_time:[],amount:Number(1e8*f)+2e4,expected_allowance:[],expires_at:[],spender:{owner:v.Principal.fromText(d.WC),subaccount:[]}});console.log("apprive results :",l);let i=(0,d.N1)(j),n=await(null===e||void 0===e?void 0:e.place_offer_on_nft(t,Number(1e8*f),i));200==n.status&&"Ok"==n.status_text?F("Offer place successfully","success"):F(n.error_text,"error"),r(),console.log("offer results here:",n)}catch(s){console.log("error in placing offer :",s)}})(e),onSuccess:async()=>{c(!1)}});return(0,b.jsxs)("div",{className:"flex bg-[#2c2d2e] w-1/2 rounded-lg mt-4 font-bold text-white justify-center items-center p-2 cursor-pointer",children:[(0,b.jsx)("button",{onClick:()=>a(!0),children:"Make Offer"}),n&&(0,b.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[N&&(0,b.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===T?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,b.jsx)("div",{className:"modal-message",children:(0,b.jsx)("p",{children:S})})}),(0,b.jsxs)("div",{className:"bg-[#252525] rounded-lg shadow-lg p-6 w-96",children:[(0,b.jsxs)("div",{className:"flex justify-between ",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Make Offer"}),(0,b.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>a(!1)})]}),(0,b.jsxs)("form",{onSubmit:O,children:[(0,b.jsx)("label",{className:"block mb-2",htmlFor:"price",children:"Enter Offer amount"}),(0,b.jsx)("input",{type:"number",id:"price",placeholder:"enter offer amount",value:f,onChange:e=>y(e.target.value),className:" border border-white text-sm text-black rounded p-1 w-full mb-4",required:!0}),(0,b.jsx)("input",{type:"number",id:"price",value:j,placeholder:"enter number of days",onChange:e=>w(e.target.value),className:" border border-white text-sm text-black rounded p-1 w-full mb-4",required:!0}),(0,b.jsx)("div",{className:"flex justify-end",children:o?(0,b.jsx)(p.A,{color:"white",size:20}):(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-white text-black rounded",children:"Place Offer"})})]})]})]})]})};var j=s(2013);const w=e=>{let{nftid:t,nft_price:s,userP:n}=e;const[a,o]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1),[x,f]=(0,i.useState)(""),[m,g]=(0,i.useState)(""),{invalidateListings:h,invalidateUserNfts:y,invalidateUserBalance:w}=(0,j.A)(),N=async(e,t)=>{f(e),g(t),u(!0),setTimeout((()=>u(!1)),3e3)},{data:_}=(0,r.I)({queryKey:["userPrincipal"]}),{data:S}=(0,r.I)({queryKey:["userIcpBalance"]}),{data:k}=(0,r.I)({queryKey:["allListings"]}),{data:T}=(0,r.I)({queryKey:["userNFTS"]}),{data:A}=(0,r.I)({queryKey:["nftActor"]}),{data:C}=(0,r.I)({queryKey:["marketplaceActor"]}),{data:I}=(0,r.I)({queryKey:["IcpActor"]}),{mutateAsync:F}=(0,l.n)({mutationFn:()=>O(),onSuccess:async()=>{h(),y(),w(),o(!1)}}),O=async()=>{try{if(!C)return void N("Log in first to purchase this NFT","error");o(!0);let e=await I.icrc2_approve({fee:[],memo:[],from_subaccount:[],created_at_time:[],amount:Number(s)+2e4,expected_allowance:[],expires_at:[],spender:{owner:v.Principal.fromText(d.WC),subaccount:[]}});console.log("approve results :",e);let r=await C.buy_nft(t);200==r.status&&"Ok"==r.status_text?N("NFT purchase successful","success"):N(r.error_text,"error"),console.log("buy results :",r)}catch(e){console.log("erro in buying nft :",e)}};return(0,b.jsxs)(b.Fragment,{children:[c&&(0,b.jsx)("div",{className:"absolute top-10 z-50 text-xs  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===m?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,b.jsx)("div",{className:"modal-message",children:(0,b.jsx)("p",{children:x})})}),(0,b.jsx)("button",{onClick:()=>F(),className:"flex bg-[#2E8DEE] w-1/2 rounded-lg mt-4 font-bold text-white justify-center items-center p-2",children:a?(0,b.jsx)(p.A,{size:20,color:"white"}):"Buy now"})]})},N=e=>{let{history:t}=e;const s=e=>`${null===e||void 0===e?void 0:e.slice(0,6)}...${null===e||void 0===e?void 0:e.slice(-4)}`;return(0,b.jsxs)("div",{className:"overflow-x-auto bg-[#1B1B1B] p-2 rounded-lg border border-gray-400",children:[(0,b.jsx)("h3",{className:"text-lg",children:"Activity"}),(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Buyer"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Seller"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,b.jsx)("tbody",{className:" divide-y divide-gray-200",children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map(((e,t)=>{var r,l,i;return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s(null===e||void 0===e||null===(r=e.buyer)||void 0===r?void 0:r.toString())}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s(null===e||void 0===e||null===(l=e.seller)||void 0===l?void 0:l.toString())}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:Number(null===e||void 0===e?void 0:e.price)/1e8}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(i=null===e||void 0===e?void 0:e.time,new Date(Number(i)/1e6).toLocaleString())})]},t)})):(0,b.jsx)("div",{className:"text-xs flex justify-center items-center ",children:"No activity available"})})]})]})},_=e=>{let{offers:t,nft:s,nftOwner:r,handleTrigger:l}=e;const a=(0,g.fJ)(),{user:o}=(0,g._d)(),c=(0,n.Zp)(),[f,h]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),[j,w]=(0,i.useState)(null),[N,_]=(0,i.useState)(!1),[S,k]=(0,i.useState)(!1),[T,A]=(0,i.useState)(!1),[C,I]=(0,i.useState)(""),[F,O]=(0,i.useState)(""),P=async(e,t)=>{I(e),O(t),A(!0),setTimeout((()=>A(!1)),3e3)};return(0,b.jsxs)("div",{className:"overflow-x-auto mb-10 bg-[#1B1B1B] p-2 rounded-lg border border-gray-400",children:[f&&(0,b.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[T&&(0,b.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===F?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,b.jsx)("div",{className:"modal-message",children:(0,b.jsx)("p",{children:C})})}),(0,b.jsxs)("div",{className:"bg-[#252525] rounded-lg flex flex-col items-center justify-center gap-1 shadow-lg p-6 w-96",children:[(0,b.jsxs)("div",{className:"flex  w-full justify-between ",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Cancel Offer"}),(0,b.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>h(!1)})]}),(0,b.jsx)("span",{children:"Proceed to cancel offer?"}),v?(0,b.jsx)(p.A,{color:"white",size:20}):(0,b.jsx)("button",{onClick:()=>(async()=>{try{y(!0);let e=(0,x.M)(d.WC,u.c,a);if(!e||!j)return;console.log(j);let t=await(null===e||void 0===e?void 0:e.cancel_offer(null===j||void 0===j?void 0:j.offer.offer_id,null===j||void 0===j?void 0:j.nft));200==t.status&&"Ok"==t.status_text?P("Offer cancelled successfully","success"):P(t.error_text,"error"),l()}catch(e){console.log("error in canceling offer :",e)}h(!1),y(!1)})(),className:"flex w-1/2 mt-2 justify-center items-center  bg-red-500 p-1 rounded-lg",children:"Confirm"})]})]}),N&&(0,b.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[T&&(0,b.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===F?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,b.jsx)("div",{className:"modal-message",children:(0,b.jsx)("p",{children:C})})}),(0,b.jsxs)("div",{className:"bg-[#252525] rounded-lg flex flex-col items-center justify-center gap-1 shadow-lg p-6 w-96",children:[(0,b.jsxs)("div",{className:"flex  w-full justify-between ",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Accept Offer"}),(0,b.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>_(!1)})]}),(0,b.jsx)("span",{children:"Confirm offer?"}),S?(0,b.jsx)(p.A,{color:"white",size:20}):(0,b.jsx)("button",{onClick:()=>(async()=>{try{k(!0);let e=(0,x.M)(d.WC,u.c,a);if(!e||!j)return;console.log("selected offer :",j);let t=await(null===e||void 0===e?void 0:e.accept_offer(j.nft,j.offer.offer_id));console.log("accept nft sale :",t),200==t.status&&"Ok"==t.status_text?P("NFT sold successfully","success"):P(t.error_text,"error")}catch(e){console.log("error in accepting offer :",e)}k(!1),_(!1),c("/")})(),className:"flex w-1/2 mt-2 justify-center items-center  bg-green-500 p-1 rounded-lg",children:"Confirm"})]})]}),(0,b.jsx)("h3",{className:"text-lg",children:"Offers"}),(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Date"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,b.jsx)("tbody",{className:" divide-y divide-gray-200",children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map(((e,t)=>{var l,i,n,a,c,d;return(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(d=null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l.toString(),`${null===d||void 0===d?void 0:d.slice(0,6)}...${null===d||void 0===d?void 0:d.slice(-4)}`)}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:[Number(null===e||void 0===e?void 0:e.amount)/1e8," ICP"]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(c=Number(null===e||void 0===e?void 0:e.expiry_date),new Date(Number(c)/1e6).toLocaleString())}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[o&&(null===o||void 0===o||null===(i=o.principal)||void 0===i?void 0:i.toString())==(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.toString())&&(0,b.jsx)("button",{onClick:()=>{w({offer:e,nft:s}),h(!0)},className:"flex  bg-red-500 p-1 rounded-lg",children:"Cancel"}),o&&(null===o||void 0===o||null===(a=o.principal)||void 0===a?void 0:a.toString())==r&&(0,b.jsx)("button",{onClick:()=>{w({offer:e,nft:s}),_(!0)},className:"flex bg-green-500 p-1 rounded-lg",children:"Accept"})]})})]},t)})):(0,b.jsx)("div",{className:"flex w-full justify-center items-center text-xs mt-3",children:" No offers available"})})]})]})};var S=s(2156);const k=e=>{let{collectionID:t,nftID:s,nftPrice:l,nftDetails:n}=e;const[a,o]=(0,i.useState)([]),{data:c,isLoading:d}=(0,r.I)({queryKey:["myTokens"]});return(0,i.useEffect)((()=>{(async()=>{try{console.log(" gg sd :",c);let e=null===c||void 0===c?void 0:c.slice(0,4),s=null===e||void 0===e?void 0:e.map(((e,s)=>(0,b.jsx)(S.A,{nft:e,collectionID:t},s)));console.log("price range :",e),o(s)}catch(e){console.log("error in getting more nfts :",e)}})()}),[n]),(0,b.jsxs)("div",{className:"flex flex-col w-full",children:[(0,b.jsx)("div",{className:"flex w-full items-center justify-center",children:"More NFTS from this collection"}),(0,b.jsx)("div",{className:"flex flex-col w-full",children:(0,b.jsx)("div",{className:"flex flex-row w-full",children:(0,b.jsx)("div",{className:"flex-grow w-full flex mt-6 justify-center items-center flex-wrap",children:a})})})]})};s(2126);var T=s(5772),A=s(6551);const C={wrapper:"flex gap-3 mt-[80px] flex-col md:flex-row justify-center bg-[#121212] h-screen p-4 text-white",leftwrapper:"flex flex-col  items-center md:items-start  mb-4 md:mb-0",rightwrapper:"flex flex-col   h-full",nftImg:" rounded-md ml-3 w-auto cursor-pointer"},I=()=>{var e,t,s;const{colID:m,nftID:p}=(0,n.g)(),[h,v]=(0,i.useState)(null),[S,I]=(0,i.useState)(""),[F,O]=(0,i.useState)(!1),[P,D]=(0,i.useState)(!1),[K,q]=(0,i.useState)(!1),[z,B]=(0,i.useState)(""),E=(0,n.Zp)(),{user:U}=(0,g._d)(),{data:L}=(0,r.I)({queryKey:["marketplaceActor"]}),{data:M,isLoading:W}=(0,r.I)({queryKey:["myTokens"]}),{data:$}=(0,r.I)({queryKey:["bulkData"]}),R="ic"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DFX_NETWORK?"https://ic0.app":"http://localhost:4943",X=new o.qB({host:R,retryTimes:10}),Z=((0,x.M)(m,c.c,X),(0,x.M)(d.WC,u.c,X)),[J,H]=(0,i.useState)(null),[V,G]=(0,i.useState)(!1),[Q,Y]=(0,i.useState)(""),[ee,te]=(0,i.useState)(""),{invalidateListings:se}=(0,j.A)(),re=async(e,t)=>{Y(e),te(t),G(!0),setTimeout((()=>G(!1)),3e3)},le=e=>B(Math.random());(0,i.useEffect)((()=>{(async()=>{try{var e,t;if(!m||!p)return;D(!0);let l=(0,a.T)(p,m);const i=null===M||void 0===M?void 0:M.find((e=>e[0]==p));let n=await(null===Z||void 0===Z?void 0:Z.get_nft_sale_history(l)),o=null===(e=(null===$||void 0===$?void 0:$.find((e=>e[0]==m)))[1])||void 0===e||null===(t=e.transactions)||void 0===t?void 0:t.filter((e=>(null===e||void 0===e?void 0:e.token)==l));if(n.data.length>0?H([...o,...null===n||void 0===n?void 0:n.data[0]]):H([...o]),(null===i||void 0===i?void 0:i.length)>0)if(i[1].inhouse_sale){let e=await(null===Z||void 0===Z?void 0:Z.get_listed_nft_details(l));200===e.status&&"Ok"===e.status_text&&v(e.data[0])}else{var s,r;v({seller_principal:null===(s=i[1].seller)||void 0===s?void 0:s.toString(),nft_price:null===(r=i[1])||void 0===r?void 0:r.price,token_identifier:(0,a.T)(i[0],m)})}}catch(l){console.log("error in fetching details :",l)}D(!1)})()}),[m,p,z]);const{mutateAsync:ie}=(0,l.n)({mutationFn:e=>ne(e),onSuccess:async()=>{se(),D(!1),E("../profile")}}),ne=async e=>{if(e.preventDefault(),h){D(!0);try{let e=await L.un_list_nft(h.token_identifier);console.log("unlisting res :",e),200==e.status&&"Ok"==e.status_text?re("NFT unlisted successfully","success"):re(e.error_text[0],"error")}catch(t){console.log("error in unlisting token :",t)}}},{mutateAsync:ae}=(0,l.n)({mutationFn:e=>oe(e),onSuccess:async()=>{se(),D(!1)}}),oe=async e=>{if(e.preventDefault(),console.log("new price : ",S),!S||0==S)return;q(!0);let t=await(null===L||void 0===L?void 0:L.update_nft_price(h.token_identifier,parseInt(1e8*S)));200==t.status&&"Ok"==t.status_text?re("price updated successfully","success"):re(t.error_text,"error"),console.log("update price results :",t),q(!1)};return(0,b.jsxs)("div",{className:"flex w-full h-full gap-4 flex-col text-white mr-6 pr-6 md:px-20 mt-[80px]",children:[(0,b.jsxs)("div",{className:"flex w-full h-full flex-col md:flex-row gap-2 mx-4",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4 w-full md:w-1/2 h-full md:items-start  mb-4 md:mb-0",children:[(0,b.jsx)("div",{className:"rounded-lg p-1 w-full flex border border-gray-400 pt-3 flex-col",children:(0,b.jsx)("img",{src:`https://${m}.raw.icp0.io/?tokenid=${(0,a.T)(p,m)}&type=thumbnail`,alt:"",className:C.nftImg})}),(0,b.jsxs)("div",{className:"flex flex-col w-full items-start",children:[(0,b.jsx)("h1",{children:"Traits"}),(0,b.jsx)("span",{className:"text-sm",children:"Coming Soon ..."})]})]}),(0,b.jsx)("div",{className:"flex  justify flex-col w-full md:w-1/2 ",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("h1",{className:"text-[30px] font-bold",children:[h&&"ICKitties"," # ",p]}),(0,b.jsxs)("span",{children:["Owned by ",null===h||void 0===h||null===(e=h.seller_principal)||void 0===e?void 0:e.toString()]}),(0,b.jsxs)("div",{className:"flex gap-1  text-sm",children:[(0,b.jsx)("span",{children:(0,b.jsx)(f.W7w,{size:25,color:"gray"})}),(0,b.jsx)("span",{children:"20 views"})]}),(0,b.jsxs)("div",{className:"flex flex-col  xs:px-3 md:px-0 gap-4 w-full",children:[(0,b.jsxs)("div",{className:"flex  flex-col w-full gap-1  bg-[#1B1B1B] border border-gray-400 p-2 rounded-lg",children:[(0,b.jsx)("h3",{children:"Current Price"}),(0,b.jsxs)("span",{className:"text-[25px]",children:[h&&(Number(null===h||void 0===h?void 0:h.nft_price)/1e8).toFixed(2),"ICP"]}),U&&U.principal.toString()==(null===h||void 0===h||null===(t=h.seller_principal)||void 0===t?void 0:t.toString())?(0,b.jsxs)("div",{className:"flex flex-row gap-4 justify-center items-center w-full",children:[(0,b.jsx)(T.A,{nft:h}),(0,b.jsx)(A.A,{nft:null===h||void 0===h?void 0:h.token_identifier,handleTrigger:le})]}):(0,b.jsxs)("div",{className:"flex flex-row gap-4 w-full",children:[(0,b.jsx)(w,{nft_price:Number(null===h||void 0===h?void 0:h.nft_price),nftid:null===h||void 0===h?void 0:h.token_identifier}),(0,b.jsx)(y,{nft_price:Number(null===h||void 0===h?void 0:h.nft_price),nftid:null===h||void 0===h?void 0:h.token_identifier,handleTrigger:le})]})]}),(0,b.jsx)(N,{history:J}),(0,b.jsx)(_,{offers:null===h||void 0===h?void 0:h.offers,nft:null===h||void 0===h?void 0:h.token_identifier,nftOwner:null===h||void 0===h||null===(s=h.seller_principal)||void 0===s?void 0:s.toString(),handleTrigger:le})]})]})})]}),h&&(0,b.jsx)(k,{nftDetails:h,collectionID:m,nftID:p,nftPrice:Number(null===h||void 0===h?void 0:h.nft_price)/1e8})]})}},6551:(e,t,s)=>{s.d(t,{A:()=>f});var r=s(7097),l=s(5043),i=s(8973),n=s(8247),a=s(2013),o=s(1699),c=s(1935),d=s(39),u=s(4230),x=s(579);const f=e=>{let{nft:t,handleTrigger:s}=e;const[f,m]=(0,l.useState)(!1),[p,g]=(0,l.useState)(""),[h,v]=(0,l.useState)(!1),{invalidateListings:b}=(0,a.A)(),[y,j]=(0,l.useState)(!1),w=(0,d.fJ)(),{user:N}=(0,d._d)(),[_,S]=(0,l.useState)(!1),[k,T]=(0,l.useState)(""),[A,C]=(0,l.useState)(""),I=async(e,t)=>{T(e),C(t),S(!0),setTimeout((()=>S(!1)),3e3)},{mutateAsync:F}=(0,r.n)({mutationFn:e=>O(e),onSuccess:async()=>{b()}}),O=async e=>{e.preventDefault();let r=(0,o.M)(c.WC,u.c,w);if(console.log("new price : ",p,t),!r)return void I("login first","error");if(!p||0==p||!t)return;j(!0),v(!0);let l=await(null===r||void 0===r?void 0:r.update_nft_price(t,parseInt(1e8*p)));200==(null===l||void 0===l?void 0:l.status)&&"Ok"==(null===l||void 0===l?void 0:l.status_text)?I("price updated successfully","success"):I(null===l||void 0===l?void 0:l.error_text,"error"),s(),j(!1),v(!1)};return(0,x.jsxs)("div",{className:"flex flex-col gap-1 w-1/2",children:[_&&(0,x.jsx)("div",{className:"absolute text-xs top-5 z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===A?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,x.jsx)("div",{className:"modal-message",children:(0,x.jsx)("p",{children:k})})}),(0,x.jsx)("button",{className:"flex bg-[#6fa0d1] w-full rounded-lg mt-4 font-bold text-white justify-center items-center p-2",onClick:()=>m(!0),children:"Update"}),f&&(0,x.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:(0,x.jsxs)("div",{className:"bg-[#252525] rounded-lg shadow-lg p-6 w-96",children:[(0,x.jsxs)("div",{className:"flex justify-between ",children:[(0,x.jsx)("h2",{className:" mb-4",children:"Update NFT price"}),(0,x.jsx)(i.PXF,{className:"cursor-pointer",onClick:()=>m(!1)})]}),(0,x.jsxs)("form",{onSubmit:F,children:[(0,x.jsx)("input",{type:"number",id:"price",value:p,placeholder:"enter new nft price",onChange:e=>g(e.target.value),className:" border border-white text-black rounded p-1 w-full mb-4",required:!0}),(0,x.jsx)("div",{className:"flex justify-end",children:h?(0,x.jsx)(n.A,{color:"white",size:20}):(0,x.jsx)("button",{type:"submit",className:"px-4 py-2 bg-white text-black rounded",children:"update"})})]})]})})]})}},5772:(e,t,s)=>{s.d(t,{A:()=>m});var r=s(7097),l=s(5043),i=s(8973),n=s(8247),a=s(2013),o=s(39),c=s(1935),d=s(4230),u=s(1699),x=s(3216),f=s(579);const m=e=>{let{nft:t,handleTrigger:s}=e;const[m,p]=(0,l.useState)(""),[g,h]=(0,l.useState)(!1),[v,b]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!1),[w,N]=(0,l.useState)(""),[_,S]=(0,l.useState)(""),{invalidateListings:k,invalidateUserNfts:T}=(0,a.A)(),A=(0,o.fJ)(),C=(0,x.Zp)(),I=async(e,t)=>{N(e),S(t),j(!0),setTimeout((()=>j(!1)),3e3)},{mutateAsync:F}=(0,r.n)({mutationFn:()=>O(),onSuccess:async()=>{k(),T(),b(!1)}}),O=async()=>{let e=(0,u.M)(c.WC,d.c,A);if(t&&e){b(!0);try{console.log("unlist :",t);let r=await(null===e||void 0===e?void 0:e.un_list_nft(t));200==r.status&&"Ok"==r.status_text?I("NFT unlisted successfully","success"):I(null===r||void 0===r?void 0:r.error_text,"error"),s(),C("/profile"),console.log("unlisting res :",r)}catch(r){console.log("error in unlisting token :",r)}}};return(0,f.jsxs)("div",{className:"flex flex-col gap-1 w-1/2",children:[(0,f.jsx)("div",{className:"flex flex-row gap-4",children:(0,f.jsx)("button",{className:"flex bg-[#2c2d2e] rounded-lg w-full mt-4 font-bold text-white justify-center items-center p-2 cursor-pointer",onClick:()=>h(!0),children:"Unlist"})}),g&&(0,f.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[y&&(0,f.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===_?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,f.jsx)("div",{className:"modal-message",children:(0,f.jsx)("p",{children:w})})}),(0,f.jsxs)("div",{className:"bg-[#252525] rounded-lg shadow-lg p-6 w-96",children:[(0,f.jsxs)("div",{className:"flex justify-between ",children:[(0,f.jsx)("h2",{className:" mb-4",children:"Unlist NFT"}),(0,f.jsx)(i.PXF,{className:"cursor-pointer",onClick:()=>h(!1)})]}),(0,f.jsx)("span",{children:"Remove NFT from the marketplace?"}),(0,f.jsx)("div",{className:"flex justify-end mt-3",children:v?(0,f.jsx)(n.A,{color:"white",size:20}):(0,f.jsx)("button",{onClick:F,className:"px-4 py-2 bg-white text-black rounded",children:"Unlist"})})]})]})]})}},2156:(e,t,s)=>{s.d(t,{A:()=>o});s(5043);var r=s(8657),l=s(1289),i=s(3216);const n=s.p+"static/media/icplogo.71d22b69911f6dedf410.png";var a=s(579);const o=e=>{var t,s,o;let{collectionID:c,nft:d}=e;const u=(0,i.Zp)();return(0,a.jsxs)("div",{className:" rounded bg-[#202020] w-[250px] m-2 rounded-b-lg",children:[(0,a.jsx)("img",{onClick:()=>u("../marketplace/"+c+"/"+d[0]),src:`https://${c}.raw.icp0.io/?tokenid=${(0,l.T)(d[0],c)}&type=thumbnail`,alt:"NFT",className:"w-[100%] ml-[2.5px] cursor-pointer  object-cover rounded mb-2"}),(0,a.jsxs)("div",{className:"flex w-full px-2 justify-between",children:[(0,a.jsxs)("p",{children:["#",d[0]]}),null!==(t=d[1])&&void 0!==t&&t.price?(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("img",{src:n,height:"7px",width:"15px",alt:"logo"}),(0,a.jsx)("span",{children:null===(s=Number(null===(o=d[1])||void 0===o?void 0:o.price)/1e8)||void 0===s?void 0:s.toFixed(2)})]}):"unlisted"]}),(0,a.jsx)("div",{className:`opacity-0 ${void 0!=d[1].price&&"hover:opacity-100"} transition-opacity duration-300`,children:(0,a.jsx)(r.A,{nftid:d[0],nft_price:Number(d[1].nft_price),userP:d[1].seller_principal})})]},d.id)}}}]);
//# sourceMappingURL=962.11cbd645.chunk.js.map