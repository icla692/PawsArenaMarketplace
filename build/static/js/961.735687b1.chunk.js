"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[961],{4186:(e,t,a)=>{a.d(t,{c:()=>r});const r=e=>{let{IDL:t}=e;const a=t.Record({owner:t.Principal,subaccount:t.Opt(t.Vec(t.Nat8))}),r=t.Record({icrc2:t.Bool}),l=t.Record({icrc1_minting_account:t.Opt(a),feature_flags:t.Opt(r)}),c=t.Record({e8s:t.Nat64}),n=t.Record({secs:t.Nat64,nanos:t.Nat32}),i=t.Record({num_blocks_to_archive:t.Nat64,max_transactions_per_response:t.Opt(t.Nat64),trigger_threshold:t.Nat64,more_controller_ids:t.Opt(t.Vec(t.Principal)),max_message_size_bytes:t.Opt(t.Nat64),cycles_for_archive_creation:t.Opt(t.Nat64),node_max_memory_size_bytes:t.Opt(t.Nat64),controller_id:t.Principal}),o=t.Record({send_whitelist:t.Vec(t.Principal),token_symbol:t.Opt(t.Text),transfer_fee:t.Opt(c),minting_account:t.Text,maximum_number_of_accounts:t.Opt(t.Nat64),accounts_overflow_trim_quantity:t.Opt(t.Nat64),transaction_window:t.Opt(n),max_message_size_bytes:t.Opt(t.Nat64),icrc1_minting_account:t.Opt(a),archive_options:t.Opt(i),initial_values:t.Vec(t.Tuple(t.Text,c)),token_name:t.Opt(t.Text),feature_flags:t.Opt(r)}),s=(t.Variant({Upgrade:t.Opt(l),Init:o}),t.Record({account:t.Vec(t.Nat8)})),d=t.Record({account:t.Text}),u=t.Record({canister_id:t.Principal}),x=t.Record({archives:t.Vec(u)}),p=t.Record({decimals:t.Nat32}),m=t.Record({url:t.Text,name:t.Text}),h=t.Variant({Int:t.Int,Nat:t.Nat,Blob:t.Vec(t.Nat8),Text:t.Text}),f=t.Record({to:a,fee:t.Opt(t.Nat),memo:t.Opt(t.Vec(t.Nat8)),from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(t.Nat64),amount:t.Nat}),N=t.Variant({GenericError:t.Record({message:t.Text,error_code:t.Nat}),TemporarilyUnavailable:t.Null,BadBurn:t.Record({min_burn_amount:t.Nat}),Duplicate:t.Record({duplicate_of:t.Nat}),BadFee:t.Record({expected_fee:t.Nat}),CreatedInFuture:t.Record({ledger_time:t.Nat64}),TooOld:t.Null,InsufficientFunds:t.Record({balance:t.Nat})}),v=t.Variant({Ok:t.Nat,Err:N}),_=t.Record({utc_offset_minutes:t.Opt(t.Int16),language:t.Text}),g=t.Variant({GenericDisplay:t.Null,LineDisplay:t.Record({characters_per_line:t.Nat16,lines_per_page:t.Nat16})}),b=t.Record({metadata:_,device_spec:t.Opt(g)}),j=t.Record({arg:t.Vec(t.Nat8),method:t.Text,user_preferences:b}),y=t.Record({lines:t.Vec(t.Text)}),w=t.Variant({LineDisplayMessage:t.Record({pages:t.Vec(y)}),GenericDisplayMessage:t.Text}),O=t.Record({metadata:_,consent_message:w}),R=t.Record({description:t.Text}),k=t.Variant({GenericError:t.Record({description:t.Text,error_code:t.Nat}),InsufficientPayment:R,UnsupportedCanisterCall:R,ConsentMessageUnavailable:R}),V=t.Variant({Ok:O,Err:k}),T=t.Record({account:a,spender:a}),F=t.Record({allowance:t.Nat,expires_at:t.Opt(t.Nat64)}),C=t.Record({fee:t.Opt(t.Nat),memo:t.Opt(t.Vec(t.Nat8)),from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(t.Nat64),amount:t.Nat,expected_allowance:t.Opt(t.Nat),expires_at:t.Opt(t.Nat64),spender:a}),P=t.Variant({GenericError:t.Record({message:t.Text,error_code:t.Nat}),TemporarilyUnavailable:t.Null,Duplicate:t.Record({duplicate_of:t.Nat}),BadFee:t.Record({expected_fee:t.Nat}),AllowanceChanged:t.Record({current_allowance:t.Nat}),CreatedInFuture:t.Record({ledger_time:t.Nat64}),TooOld:t.Null,Expired:t.Record({ledger_time:t.Nat64}),InsufficientFunds:t.Record({balance:t.Nat})}),S=t.Variant({Ok:t.Nat,Err:P}),q=t.Record({to:a,fee:t.Opt(t.Nat),spender_subaccount:t.Opt(t.Vec(t.Nat8)),from:a,memo:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(t.Nat64),amount:t.Nat}),I=t.Variant({GenericError:t.Record({message:t.Text,error_code:t.Nat}),TemporarilyUnavailable:t.Null,InsufficientAllowance:t.Record({allowance:t.Nat}),BadBurn:t.Record({min_burn_amount:t.Nat}),Duplicate:t.Record({duplicate_of:t.Nat}),BadFee:t.Record({expected_fee:t.Nat}),CreatedInFuture:t.Record({ledger_time:t.Nat64}),TooOld:t.Null,InsufficientFunds:t.Record({balance:t.Nat})}),M=t.Variant({Ok:t.Nat,Err:I}),E=t.Record({name:t.Text}),L=t.Record({start:t.Nat64,length:t.Nat64}),D=t.Record({timestamp_nanos:t.Nat64}),A=t.Variant({Approve:t.Record({fee:c,from:t.Vec(t.Nat8),allowance_e8s:t.Int,allowance:c,expected_allowance:t.Opt(c),expires_at:t.Opt(D),spender:t.Vec(t.Nat8)}),Burn:t.Record({from:t.Vec(t.Nat8),amount:c,spender:t.Opt(t.Vec(t.Nat8))}),Mint:t.Record({to:t.Vec(t.Nat8),amount:c}),Transfer:t.Record({to:t.Vec(t.Nat8),fee:c,from:t.Vec(t.Nat8),amount:c,spender:t.Opt(t.Vec(t.Nat8))})}),U=t.Record({memo:t.Nat64,icrc1_memo:t.Opt(t.Vec(t.Nat8)),operation:t.Opt(A),created_at_time:D}),B=t.Record({transaction:U,timestamp:D,parent_hash:t.Opt(t.Vec(t.Nat8))}),H=t.Record({blocks:t.Vec(B)}),z=t.Variant({BadFirstBlockIndex:t.Record({requested_index:t.Nat64,first_valid_index:t.Nat64}),Other:t.Record({error_message:t.Text,error_code:t.Nat64})}),W=t.Variant({Ok:H,Err:z}),G=t.Record({callback:t.Func([L],[W],["query"]),start:t.Nat64,length:t.Nat64}),K=t.Record({certificate:t.Opt(t.Vec(t.Nat8)),blocks:t.Vec(B),chain_length:t.Nat64,first_block_index:t.Nat64,archived_blocks:t.Vec(G)}),$=t.Variant({Ok:t.Vec(t.Vec(t.Nat8)),Err:z}),J=t.Record({callback:t.Func([L],[$],["query"]),start:t.Nat64,length:t.Nat64}),Q=t.Record({certificate:t.Opt(t.Vec(t.Nat8)),blocks:t.Vec(t.Vec(t.Nat8)),chain_length:t.Nat64,first_block_index:t.Nat64,archived_blocks:t.Vec(J)}),X=t.Record({to:t.Text,fee:c,memo:t.Nat64,from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(D),amount:c}),Z=t.Record({symbol:t.Text}),Y=t.Record({to:t.Vec(t.Nat8),fee:c,memo:t.Nat64,from_subaccount:t.Opt(t.Vec(t.Nat8)),created_at_time:t.Opt(D),amount:c}),ee=t.Variant({TxTooOld:t.Record({allowed_window_nanos:t.Nat64}),BadFee:t.Record({expected_fee:c}),TxDuplicate:t.Record({duplicate_of:t.Nat64}),TxCreatedInFuture:t.Null,InsufficientFunds:t.Record({balance:c})}),te=t.Variant({Ok:t.Nat64,Err:ee}),ae=t.Record({transfer_fee:c});return t.Service({account_balance:t.Func([s],[c],["query"]),account_balance_dfx:t.Func([d],[c],["query"]),account_identifier:t.Func([a],[t.Vec(t.Nat8)],["query"]),archives:t.Func([],[x],["query"]),decimals:t.Func([],[p],["query"]),icrc10_supported_standards:t.Func([],[t.Vec(m)],["query"]),icrc1_balance_of:t.Func([a],[t.Nat],["query"]),icrc1_decimals:t.Func([],[t.Nat8],["query"]),icrc1_fee:t.Func([],[t.Nat],["query"]),icrc1_metadata:t.Func([],[t.Vec(t.Tuple(t.Text,h))],["query"]),icrc1_minting_account:t.Func([],[t.Opt(a)],["query"]),icrc1_name:t.Func([],[t.Text],["query"]),icrc1_supported_standards:t.Func([],[t.Vec(m)],["query"]),icrc1_symbol:t.Func([],[t.Text],["query"]),icrc1_total_supply:t.Func([],[t.Nat],["query"]),icrc1_transfer:t.Func([f],[v],[]),icrc21_canister_call_consent_message:t.Func([j],[V],[]),icrc2_allowance:t.Func([T],[F],["query"]),icrc2_approve:t.Func([C],[S],[]),icrc2_transfer_from:t.Func([q],[M],[]),name:t.Func([],[E],["query"]),query_blocks:t.Func([L],[K],["query"]),query_encoded_blocks:t.Func([L],[Q],["query"]),send_dfx:t.Func([X],[t.Nat64],[]),symbol:t.Func([],[Z],["query"]),transfer:t.Func([Y],[te],[]),transfer_fee:t.Func([t.Record({})],[ae],["query"])})}},1289:(e,t,a)=>{a.d(t,{T:()=>l});var r=a(2198);function l(e,t){let a=new Uint8Array([10,116,105,100]);const l=r.Principal.fromText(t).toUint8Array();a=new Uint8Array([...a,...l]);let c=e;for(let r=3;r>=0;r--){const e=Math.pow(2,8*r),t=Math.floor(c/e);a=new Uint8Array([...a,t]),c-=t*e}return r.Principal.fromUint8Array(a).toText()}},8657:(e,t,a)=>{a.d(t,{A:()=>h});var r=a(7097),l=a(5043),c=a(1935),n=a(2198),i=a(8247),o=a(2013),s=a(3216),d=a(39),u=a(1699),x=a(4230),p=a(4186),m=a(579);const h=e=>{let{nftid:t,nft_price:a,userP:h}=e;const[f,N]=(0,l.useState)(!1),[v,_]=(0,l.useState)(!1),[g,b]=(0,l.useState)(""),[j,y]=(0,l.useState)(""),{invalidateListings:w,invalidateUserNfts:O,invalidateUserBalance:R}=(0,o.A)(),k=(0,d.fJ)(),{user:V}=(0,d._d)(),T=async(e,t)=>{b(e),y(t),_(!0),setTimeout((()=>_(!1)),3e3)},F=(0,s.Zp)(),{mutateAsync:C}=(0,r.n)({mutationFn:()=>P(),onSuccess:async()=>{w(),O(),R(),N(!1)}}),P=async()=>{try{if(!V||!k)return void T("Log in first to purchase this NFT","error");let e=(0,u.M)(c.WC,x.c,k);const r=(0,u.M)(c.tc,p.c,k);N(!0);let l=await r.icrc2_approve({fee:[],memo:[],from_subaccount:[],created_at_time:[],amount:Number(a)+2e4,expected_allowance:[],expires_at:[],spender:{owner:n.Principal.fromText(c.WC),subaccount:[]}});console.log("approve results :",l);let i=await e.buy_nft(t);200==i.status&&"Ok"==i.status_text?T("NFT purchase successful","success"):T(i.error_text,"error"),console.log("buy results :",i)}catch(e){console.log("error in buying nft :",e)}F("/profile")};return(0,m.jsxs)(m.Fragment,{children:[v&&(0,m.jsx)("div",{className:"absolute top-10 z-50 text-xs  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===j?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,m.jsx)("div",{className:"modal-message",children:(0,m.jsx)("p",{children:g})})}),(0,m.jsx)("button",{onClick:()=>C(),className:"flex w-full bg-[#2E8DEE] rounded-b-lg mt-4 font-bold text-white justify-center items-center p-2",children:f?(0,m.jsx)(i.A,{size:20,color:"white"}):"Buy"})]})}},2188:(e,t,a)=>{a.d(t,{A:()=>o});a(5043);var r=a(8657),l=a(1289),c=a(3216),n=a(8063),i=a(579);const o=e=>{var t,a,o;let{collectionID:s,nft:d}=e;const u=(0,c.Zp)();return(0,i.jsxs)("div",{className:" rounded bg-[#202020] w-[250px] m-2 rounded-b-lg",children:[(0,i.jsx)("img",{onClick:()=>u("../marketplace/"+s+"/"+d[0]),src:`https://${s}.raw.icp0.io/?tokenid=${(0,l.T)(d[0],s)}&type=thumbnail`,alt:"NFT",className:"w-[100%] ml-[2.5px] cursor-pointer  object-cover rounded mb-2"}),(0,i.jsxs)("div",{className:"flex w-full px-2 justify-between",children:[(0,i.jsxs)("p",{children:["#",d[0]]}),null!==(t=d[1])&&void 0!==t&&t.price?(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)("img",{src:n,height:"7px",width:"15px",alt:"logo"}),(0,i.jsx)("span",{children:null===(a=Number(null===(o=d[1])||void 0===o?void 0:o.price)/1e8)||void 0===a?void 0:a.toFixed(2)})]}):"unlisted"]}),(0,i.jsx)("div",{className:`opacity-0 ${void 0!=d[1].price&&"hover:opacity-100"} transition-opacity duration-300`,children:(0,i.jsx)(r.A,{nftid:d[0],nft_price:Number(d[1].nft_price),userP:d[1].seller_principal})})]},d.id)}},961:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var r=a(826),l=a(5043),c=a(3216),n=a(1935),i=a(1699),o=a(8247),s=a(579);const d=e=>{let{collectionData:t,isLoading:a}=e;const[r,c]=(0,l.useState)(!1);return console.log("dddd :",t),(0,s.jsxs)("div",{className:"flex flex-col mt-[80px]",children:[t?(0,s.jsx)("div",{className:"relative rounded w-full object-cover mx-auto",children:(0,s.jsxs)("div",{className:"overflow-hidden h-[200px] w-full",children:[(0,s.jsx)("img",{src:null===t||void 0===t?void 0:t.imgUrl,alt:null===t||void 0===t?void 0:t.name,className:"w-full rounded-lg h-full object-cover"}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 text-white p-2",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-end",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:null===t||void 0===t?void 0:t.name}),(0,s.jsxs)("div",{className:"flex  flex-row justify-between gap-4 mt-1",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:"Volume"}),(0,s.jsxs)("span",{children:[(Number(null===t||void 0===t?void 0:t.volume)/1e11).toFixed(2),"k"]})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:"Listings"}),(0,s.jsx)("span",{children:Number(null===t||void 0===t?void 0:t.totalListed)})]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:"Floor Price"}),(0,s.jsx)("span",{children:(Number(null===t||void 0===t?void 0:t.floorPrice)/1e8).toFixed(2)})]})]})]})})]})},null===t||void 0===t?void 0:t.canisterId):(0,s.jsx)("div",{className:"flex flex-col mt-[80px] justify-center items-center",children:(0,s.jsx)(o.A,{size:25,color:"white"})}),t&&(0,s.jsxs)("div",{className:"mx-4 p-4 flex flex-col justify-center items-center",children:[(0,s.jsx)("div",{className:"text-white text-center",children:r?null===t||void 0===t?void 0:t.description:`${null===t||void 0===t?void 0:t.description.slice(0,150)}...`}),(0,s.jsx)("button",{onClick:()=>{c(!r)},className:"text-white text-md font-bold flex justify-center items-center hover:underline mt-2",children:r?"See Less":"See More"})]})]})};a(1289),a(8657);var u=a(2188);const x=e=>{let{results:t,isSidebarOpen:a,isLoading:r,minPrice:l,maxPrice:c,handleMinPriceChange:n,handleMaxPriceChange:i}=e;return(0,s.jsxs)("div",{className:"flex  w-full  text-white gap-3 border-gray-400 p-2",children:[a&&(0,s.jsx)("div",{className:"hidden md:block border border-gray-600 p-4 w-1/4",children:(0,s.jsxs)("div",{className:"flex txt-black flex-col mt-4",children:[(0,s.jsx)("span",{children:"Price"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Min",value:l,onChange:n,className:"p-1 rounded text-black",required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Max",value:c,onChange:i,className:"p-1 rounded text-black",required:!0})]}),(0,s.jsx)("div",{className:"flex flex-col mt-4",children:(0,s.jsx)("span",{children:"Traits"})})]})}),(0,s.jsx)("div",{className:"flex flex-col w-full",children:(0,s.jsx)("div",{className:"flex flex-row w-full",children:(0,s.jsx)("div",{className:"flex-grow w-full flex  justify-center items-center flex-wrap",children:r?(0,s.jsx)(o.A,{size:25,color:"white"}):t})})})]})};var p=a(5394);const m=e=>{let{onClickHandler:t,value:a,title:r}=e;return(0,s.jsx)("button",{onClick:t,value:a,className:"btns",children:r})};var h=a(423);const f=e=>{let{currentPage:t,nextPage:a,pages:r,prevPage:l,searchQuery:c,sortPrice:n,isModalOpen:i,toggleSidebar:o,closeModal:d,handlelistedChange:u,handleSortPriceChange:x,handleSearchChange:f,maxPrice:N,minPrice:v,handleMaxPriceChange:_,handleMinPriceChange:g}=e;return(0,s.jsxs)("div",{className:"flex flex-col w-full gap-4 p-2",children:[(0,s.jsxs)("div",{className:"flex mt-[05px] cursor-pointer border-b-[1px] pb-2 border-white flex-row justify-between items-center w-full",children:[(0,s.jsx)(p.n6t,{size:35,color:"white",onClick:o}),(0,s.jsxs)("div",{className:"hidden md:block relative ",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,s.jsx)(h.uG9,{color:"gray",size:25})}),(0,s.jsx)("input",{type:"text",className:"hidden md:block bg-transparent border outline-none border-gray-300 text-white rounded-lg w-full pl-10 p-2.5",placeholder:"Search by name or trait",onChange:f,value:c})]}),(0,s.jsx)("div",{className:"hidden md:flex md:flex-row gap-2",children:(0,s.jsxs)("select",{value:n,onChange:x,className:" block bg-transparent  text-white  w-full p-3 border rounded-lg",children:[(0,s.jsx)("option",{value:"lowtohigh",className:"bg-red-400",children:"Price Low to High"}),(0,s.jsx)("option",{value:"hightolow",children:"Price High to Low"})]})})]}),(0,s.jsx)("div",{className:"hidden md:flex-row md:block justify-between items-center cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between items-center ",children:[(0,s.jsxs)("div",{className:"flex mt-4",children:[(0,s.jsx)(m,{onClickHandler:u,value:"all",title:"All"}),(0,s.jsx)(m,{onClickHandler:u,value:"listed",title:"Listed"}),(0,s.jsx)(m,{onClickHandler:u,value:"hasoffers",title:"Has Offers"})]}),(0,s.jsxs)("div",{className:"flex gap-4 items-center justify-center mt-4",children:[(0,s.jsx)("button",{onClick:l,disabled:0===t,className:"px-4 py-1 bg-transparent border text-white rounded "+(0===t?"opacity-50 cursor-not-allowed":""),children:"Previous"}),(0,s.jsx)("button",{onClick:a,disabled:t>=r-1,className:"px-4 py-1 bg-transparent border text-white rounded "+(t>=r-1?"opacity-50 cursor-not-allowed":""),children:"Next"})]})]})}),i&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-70 flex justify-center items-center z-50",children:(0,s.jsxs)("div",{className:"bg-[#202020] p-4 rounded-lg w-[90%] md:w-[400px]",children:[(0,s.jsxs)("div",{className:"flex w-full justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-lg font-bold text-white mb-2",children:"Filter"}),(0,s.jsx)("button",{onClick:d,className:"text-red-400 font-bold float-right cursor-pointer text-lg",children:"X"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name or trait...",value:c,onChange:f,className:"p-1 rounded outline-none bg-gray-300 border-none mt-6 w-full"}),(0,s.jsx)("div",{className:" md:block  mt-6 justify-between items-center cursor-pointer",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(m,{onClickHandler:u,value:"all",title:"All"}),(0,s.jsx)(m,{onClickHandler:u,value:"listed",title:"Listed"}),(0,s.jsx)(m,{onClickHandler:u,value:"hasoffers",title:"Has Offers"})]})}),(0,s.jsxs)("select",{value:n,onChange:x,className:"mt-4 block bg-gray-300 text-black w-full p-2 border rounded",children:[(0,s.jsx)("option",{value:"lowtohigh",children:"Price Low to High"}),(0,s.jsx)("option",{value:"hightolow",children:"Price High to Low"})]}),(0,s.jsxs)("div",{className:"flex flex-col mt-4",children:[(0,s.jsx)("span",{className:"text-white",children:"Price"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Min",value:v,onChange:g,className:"p-1 rounded border-none bg-gray-300 outline-none text-black",required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Max",value:N,onChange:_,className:"p-1 rounded bg-gray-300 border-none outline-none text-black",required:!0})]}),(0,s.jsx)("div",{className:"flex flex-col mt-4",children:(0,s.jsx)("span",{className:"text-white",children:"Traits"})})]})]})})]})};var N=a(4230),v=a(3248),_=a(3747);const g="ic"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DFX_NETWORK?"https://ic0.app":"http://localhost:4943",b=new r.qB({host:g,retryTimes:10}),j=()=>{const{collectionID:e}=(0,c.g)(),[t,a]=(0,l.useState)(null),[r,o]=(0,l.useState)(""),[p,m]=(0,l.useState)("lowtohigh"),[h,g]=(0,l.useState)("listed"),[j,y]=(0,l.useState)(""),[w,O]=(0,l.useState)(""),[R,k]=(0,l.useState)(!0),[V,T]=(0,l.useState)(0),[F,C]=(0,l.useState)([]),[P,S]=(0,l.useState)([]),[q,I]=(0,l.useState)(!0),[M,E]=(0,l.useState)(!1),L=(0,v.jE)(),{data:D}=(0,_.I)({queryKey:["bulkData"]}),{data:A,isLoading:U}=(0,_.I)({queryKey:["myTokens"]}),{data:B,isLoading:H}=(0,_.I)({queryKey:["collectionDetails"]});(0,l.useEffect)((()=>{(async()=>{k(!0);JSON.parse(localStorage.getItem("bulkData"));let t=JSON.parse(localStorage.getItem("bulkData"));console.log("here is the data :",t),console.log("xxxxxxxx :",B,D);try{var r,l,c;const t=(0,i.M)(n.WC,N.c,b),o=n.Oq.find((t=>t.canisterId===e)),s=await(null===t||void 0===t?void 0:t.get_all_listed_nfts()),d=(null===s||void 0===s||null===(r=s.data[0])||void 0===r?void 0:r.filter((t=>t[1].nft_canister==e)))||[],u=null===d||void 0===d?void 0:d.map((e=>[e[1].nft_id,{locked:[],seller:e[1].seller_principal,price:e[1].nft_price,inhouse_sale:!0}]));let x=null===D||void 0===D?void 0:D.find((t=>t[0]==e)),p=null===B||void 0===B?void 0:B.find((t=>t.canisterId==e));const m=[...u];C(m);const h=Object.fromEntries(m.map((e=>[e[0],e]))),f=null===(l=x[1])||void 0===l||null===(c=l.allNftTokens)||void 0===c?void 0:c.map((e=>h[e[0]]?h[e[0]]:e));console.log("all ttt :",f),S(f),L.setQueryData(["myTokens"],f),o&&a({imgUrl:null===p||void 0===p?void 0:p.imgUrl,canisterId:null===p||void 0===p?void 0:p.canisterId,name:null===p||void 0===p?void 0:p.name,description:null===p||void 0===p?void 0:p.description,volume:null===p||void 0===p?void 0:p.volume,floorPrice:null===p||void 0===p?void 0:p.floorprice,totalListed:null===p||void 0===p?void 0:p.totalListed})}catch(o){console.error("Error loading NFT data:",o)}finally{k(!1)}})()}),[e]);const z=e=>y(e.target.value),W=e=>O(e.target.value);console.log(h,j);const G=(0,l.useMemo)((()=>{var t;let a=[...F];var l,c,n,i,o;r&&(a=null===(l=a)||void 0===l?void 0:l.filter((e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.toString().toLowerCase().includes(r.toLowerCase())})));"listed"===h?a=null===(c=a)||void 0===c?void 0:c.filter((e=>{var t;return null===(t=e[1])||void 0===t?void 0:t.hasOwnProperty("price")})):"all"===h&&(a=P,console.log("all tokens :",P));j&&(a=null===(n=a)||void 0===n?void 0:n.filter((e=>{var t;return Number(null===(t=e[1])||void 0===t?void 0:t.price)/1e8>=parseFloat(j)})));w&&(a=null===(i=a)||void 0===i?void 0:i.filter((e=>{var t;return Number(null===(t=e[1])||void 0===t?void 0:t.price)/1e8<=parseFloat(w)})));p&&(null===(o=a)||void 0===o||o.sort(((e,t)=>"lowtohigh"===p?Number(e[1].price)-Number(t[1].price):Number(t[1].price)-Number(e[1].price))));const d=50*V,x=d+50;return console.log("hhhhhhhhhhhhhhhhhh:",a),null===(t=a)||void 0===t?void 0:t.slice(d,x).map(((t,a)=>(0,s.jsx)(u.A,{nft:t,collectionID:e},a)))}),[F,P,r,p,h,j,w,V]),K=Math.ceil((null===P||void 0===P?void 0:P.length)/50);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex flex-col mx-4 min-h-screen md:mx-20 mt-50",children:[(0,s.jsx)(d,{collectionData:t,isLoading:U}),(0,s.jsx)(f,{prevPage:()=>{V>0&&T((e=>e-1))},nextPage:()=>{V<K-1&&T((e=>e+1))},currentPage:V,sortPrice:p,pages:K,searchQuery:r,isModalOpen:M,closeModal:()=>E(!1),maxPrice:w,minPrice:j,handleMaxPriceChange:W,handleMinPriceChange:z,toggleSidebar:()=>{window.innerWidth<768?E(!0):I((e=>!e))},handleSearchChange:e=>o(e.target.value),handleSortPriceChange:e=>m(e.target.value),handlelistedChange:e=>g((t=>e.target.value))}),(0,s.jsx)(x,{results:G,isLoading:U,maxPrice:w,minPrice:j,isSidebarOpen:q,isModalOpen:M,handleMaxPriceChange:W,handleMinPriceChange:z,closeModal:()=>E(!1)})]})})}},8063:(e,t,a)=>{e.exports=a.p+"static/media/icplogo.71d22b69911f6dedf410.png"}}]);
//# sourceMappingURL=961.735687b1.chunk.js.map