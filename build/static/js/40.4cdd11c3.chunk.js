"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[40],{9040:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var l=s(3747),i=s(5043),r=s(3216),n=s(1289),a=s(8247),d=s(826),o=s(1935),c=s(4230),u=s(1699),x=s(5394),f=s(7097),m=s(8973),p=s(39),h=s(4186),v=s(2198),g=s(579);const j=e=>{let{nftid:t,nft_price:s,handleTrigger:l}=e;const[r,n]=(0,i.useState)(!1),[d,x]=(0,i.useState)(!1),[j,b]=(0,i.useState)(""),[w,y]=(0,i.useState)(""),[N,k]=(0,i.useState)(!1),[S,_]=(0,i.useState)(""),[C,T]=(0,i.useState)(""),{user:A}=(0,p._d)(),O=(0,p.fJ)({retryTimes:2}),D=async(e,t)=>{_(e),T(t),k(!0),setTimeout((()=>k(!1)),3e3)},{mutateAsync:M}=(0,f.n)({mutationFn:e=>(async e=>{e.preventDefault(),x(!0);try{if(!A||!O)return;let e=(0,u.M)(o.WC,c.c,O);const s=(0,u.M)(o.tc,h.c,O);let i=await s.icrc2_approve({fee:[],memo:[],from_subaccount:[],created_at_time:[],amount:Number(1e8*j)+2e4,expected_allowance:[],expires_at:[],spender:{owner:v.Principal.fromText(o.WC),subaccount:[]}});console.log("apprive results :",i);let r=(0,o.N1)(w),n=await(null===e||void 0===e?void 0:e.place_offer_on_nft(t,Number(1e8*j),r));200==n.status&&"Ok"==n.status_text?D("Offer place successfully","success"):D(n.error_text,"error"),l(),console.log("offer results here:",n)}catch(s){console.log("error in placing offer :",s)}})(e),onSuccess:async()=>{x(!1)}});return(0,g.jsxs)("div",{className:"flex bg-[#2c2d2e] w-1/2 rounded-lg mt-4 font-bold text-white justify-center items-center p-2 cursor-pointer",children:[(0,g.jsx)("button",{onClick:()=>n(!0),children:"Make Offer"}),r&&(0,g.jsxs)("div",{className:"fixed inset-0 p-4 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[N&&(0,g.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===C?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,g.jsx)("div",{className:"modal-message",children:(0,g.jsx)("p",{children:S})})}),(0,g.jsxs)("div",{className:"bg-[#252525] rounded-lg shadow-lg p-6 w-96",children:[(0,g.jsxs)("div",{className:"flex justify-between ",children:[(0,g.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Make Offer"}),(0,g.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>n(!1)})]}),(0,g.jsxs)("form",{onSubmit:M,children:[(0,g.jsx)("label",{className:"block mb-2",htmlFor:"price",children:"Enter Offer amount"}),(0,g.jsx)("input",{type:"number",id:"price",placeholder:"enter offer amount",value:j,onChange:e=>b(e.target.value),className:" border border-white text-sm text-black rounded p-1 w-full mb-4",required:!0}),(0,g.jsx)("input",{type:"number",id:"price",value:w,placeholder:"enter number of days",onChange:e=>y(e.target.value),className:" border border-white text-sm text-black rounded p-1 w-full mb-4",required:!0}),(0,g.jsx)("div",{className:"flex justify-end",children:d?(0,g.jsx)(a.A,{color:"white",size:20}):(0,g.jsx)("button",{type:"submit",className:"px-4 py-2 bg-white text-black rounded",children:"Place Offer"})})]})]})]})]})};var b=s(2013);const w=e=>{let{history:t}=e;const s=e=>`${null===e||void 0===e?void 0:e.slice(0,6)}...${null===e||void 0===e?void 0:e.slice(-4)}`;return(0,g.jsxs)("div",{className:"overflow-x-auto bg-[#1B1B1B] p-2 rounded-lg border border-gray-400 h-[200px] md:h-[400px]",children:[(0,g.jsx)("h3",{className:"text-lg",children:"Activity"}),(0,g.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,g.jsx)("thead",{className:"",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Buyer"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Seller"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,g.jsx)("tbody",{className:" divide-y divide-gray-200",children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map(((e,t)=>{var l,i,r;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s(null===e||void 0===e||null===(l=e.buyer)||void 0===l?void 0:l.toString())}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:s(null===e||void 0===e||null===(i=e.seller)||void 0===i?void 0:i.toString())}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:Number(null===e||void 0===e?void 0:e.price)/1e8}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(r=null===e||void 0===e?void 0:e.time,new Date(Number(r)/1e6).toLocaleString())})]},t)})):(0,g.jsx)("div",{className:"text-xs flex justify-center items-center ",children:"No activity available"})})]})]})};var y=s(3248);const N=e=>{let{offers:t,nft:s,nftOwner:l,handleTrigger:n}=e;const d=(0,p.fJ)(),{user:x}=(0,p._d)(),f=(0,r.Zp)(),h=(0,y.jE)(),[v,j]=(0,i.useState)(!1),[b,w]=(0,i.useState)(!1),[N,k]=(0,i.useState)(null),[S,_]=(0,i.useState)(!1),[C,T]=(0,i.useState)(!1),[A,O]=(0,i.useState)(!1),[D,M]=(0,i.useState)(""),[z,F]=(0,i.useState)(""),I=async(e,t)=>{M(e),F(t),O(!0),setTimeout((()=>O(!1)),3e3)};return(0,g.jsxs)("div",{className:"overflow-x-auto mb-10 bg-[#1B1B1B] p-2 rounded-lg border border-gray-400",children:[v&&(0,g.jsxs)("div",{className:"fixed inset-0 p-4 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[A&&(0,g.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===z?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,g.jsx)("div",{className:"modal-message",children:(0,g.jsx)("p",{children:D})})}),(0,g.jsxs)("div",{className:"bg-[#252525] rounded-lg flex flex-col items-center justify-center gap-1 shadow-lg p-6 w-96",children:[(0,g.jsxs)("div",{className:"flex  w-full justify-between ",children:[(0,g.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Cancel Offer"}),(0,g.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>j(!1)})]}),(0,g.jsx)("span",{children:"Proceed to cancel offer?"}),b?(0,g.jsx)(a.A,{color:"white",size:20}):(0,g.jsx)("button",{onClick:()=>(async()=>{try{w(!0);let e=(0,u.M)(o.WC,c.c,d);if(!e||!N)return;console.log(N);let t=await(null===e||void 0===e?void 0:e.cancel_offer(null===N||void 0===N?void 0:N.offer.offer_id,null===N||void 0===N?void 0:N.nft));200==t.status&&"Ok"==t.status_text?I("Offer cancelled successfully","success"):I(t.error_text,"error"),n()}catch(e){console.log("error in canceling offer :",e)}j(!1),w(!1)})(),className:"flex w-1/2 mt-2 justify-center items-center  bg-red-500 p-1 rounded-lg",children:"Confirm"})]})]}),S&&(0,g.jsxs)("div",{className:"fixed inset-0 p-4 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[A&&(0,g.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===z?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,g.jsx)("div",{className:"modal-message",children:(0,g.jsx)("p",{children:D})})}),(0,g.jsxs)("div",{className:"bg-[#252525] rounded-lg flex flex-col items-center justify-center gap-1 shadow-lg p-6 w-96",children:[(0,g.jsxs)("div",{className:"flex  w-full justify-between ",children:[(0,g.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Accept Offer"}),(0,g.jsx)(m.PXF,{className:"cursor-pointer",onClick:()=>_(!1)})]}),(0,g.jsx)("span",{children:"Confirm offer?"}),C?(0,g.jsx)(a.A,{color:"white",size:20}):(0,g.jsx)("button",{onClick:()=>(async()=>{try{T(!0);let e=(0,u.M)(o.WC,c.c,d);if(!e||!N)return;console.log("selected offer :",N);let t=await(null===e||void 0===e?void 0:e.accept_offer(N.nft,N.offer.offer_id));console.log("accept nft sale :",t),200==t.status&&"Ok"==t.status_text?I("NFT sold successfully","success"):I(t.error_text,"error"),h.setQueryData(["refreshData"],Math.random())}catch(e){console.log("error in accepting offer :",e)}T(!1),_(!1),f("/")})(),className:"flex w-1/2 mt-2 justify-center items-center  bg-green-500 p-1 rounded-lg",children:"Confirm"})]})]}),(0,g.jsx)("h3",{className:"text-lg",children:"Offers"}),(0,g.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,g.jsx)("thead",{className:"",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Date"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,g.jsx)("tbody",{className:" divide-y divide-gray-200",children:(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t.map(((e,t)=>{var i,r,n,a,d,o;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(o=null===e||void 0===e||null===(i=e.user)||void 0===i?void 0:i.toString(),`${null===o||void 0===o?void 0:o.slice(0,6)}...${null===o||void 0===o?void 0:o.slice(-4)}`)}),(0,g.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:[Number(null===e||void 0===e?void 0:e.amount)/1e8," ICP"]}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(d=Number(null===e||void 0===e?void 0:e.expiry_date),new Date(Number(d)/1e6).toLocaleString())}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[x&&(null===x||void 0===x||null===(r=x.principal)||void 0===r?void 0:r.toString())==(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.toString())&&(0,g.jsx)("button",{onClick:()=>{k({offer:e,nft:s}),j(!0)},className:"flex  bg-red-500 p-1 rounded-lg",children:"Cancel"}),x&&(null===x||void 0===x||null===(a=x.principal)||void 0===a?void 0:a.toString())==l&&(0,g.jsx)("button",{onClick:()=>{k({offer:e,nft:s}),_(!0)},className:"flex bg-green-500 p-1 rounded-lg",children:"Accept"})]})})]},t)})):(0,g.jsx)("div",{className:"flex w-full justify-center items-center text-xs mt-3",children:" No offers available"})})]})]})};var k=s(893);const S=e=>{let{collectionID:t,nftID:s,nftPrice:r,nftDetails:n}=e;const[a,d]=(0,i.useState)([]),{data:o,isLoading:c}=(0,l.I)({queryKey:["myTokens"]});return(0,i.useEffect)((()=>{(async()=>{try{console.log(" gg sd :",o);let e=null===o||void 0===o?void 0:o.slice(0,4),s=null===e||void 0===e?void 0:e.map(((e,s)=>(0,g.jsx)(k.A,{nft:e,collectionID:t},s)));console.log("price range :",e),d(s)}catch(e){console.log("error in getting more nfts :",e)}})()}),[n]),(0,g.jsxs)("div",{className:"flex flex-col w-full",children:[(0,g.jsx)("div",{className:"flex w-full items-center justify-center",children:"More NFTS from this collection"}),(0,g.jsx)("div",{className:"flex flex-col w-full",children:(0,g.jsx)("div",{className:"flex flex-row w-full",children:(0,g.jsx)("div",{className:"flex-grow w-full flex mt-6 justify-center items-center flex-wrap",children:a})})})]})};s(2126);var _=s(5772),C=s(6551),T=s(7586),A=s(8063),O=(s(2420),s(8657)),D=s(1726),M=s(1462);const z=()=>{var e,t,s;const{colID:f,nftID:m}=(0,r.g)(),[h,v]=(0,i.useState)({}),[y,k]=(0,i.useState)(""),[z,F]=(0,i.useState)(!1),[I,P]=(0,i.useState)(!1),[B,W]=(0,i.useState)(!1),[q,E]=(0,i.useState)(!1),[L,U]=(0,i.useState)(""),{user:Z}=((0,r.Zp)(),(0,p._d)()),{data:$}=(0,l.I)({queryKey:["marketplaceActor"]}),{data:K,isLoading:X}=(0,l.I)({queryKey:["myTokens"]}),{data:J}=(0,l.I)({queryKey:["bulkData"]}),Q=(0,i.useMemo)((()=>new d.qB({host:"https://ic0.app",retryTimes:10})),[]),R=(0,i.useMemo)((()=>(0,u.M)(o.WC,c.c,Q)),[Q]),[Y,G]=(0,i.useState)(null),[H,V]=(0,i.useState)(!1),[ee,te]=(0,i.useState)(""),[se,le]=(0,i.useState)(""),[ie,re]=(0,i.useState)(null),[ne,ae]=(0,i.useState)(null),{invalidateListings:de}=(0,b.A)(),oe=e=>U(Math.random()),ce=(0,i.useMemo)((()=>f&&m?(0,n.TZ)(m,f):null),[f,m]),ue=(0,i.useMemo)((()=>null===K||void 0===K?void 0:K.find((e=>e[0]==m))),[K,m]);return(0,i.useEffect)((()=>{(async()=>{if(m)try{let e=(0,n.TZ)(m,f);console.log("token identifier :",e);await R.save_nft_view(e);let t=await R.get_nft_views(e);200==t.status&&"Ok"==t.status_text&&ae(Number(t.data[0]))}catch(e){console.log("error in saving and retrieving total nft view :",e)}})()}),[m]),(0,i.useEffect)((()=>{(async()=>{try{var e,t;if(!f||!m)return;E(!0);let s=(0,u.M)(o.qY,T.c,Q),l=await(null===R||void 0===R?void 0:R.get_nft_sale_history(ce)),i=null===(e=(null===J||void 0===J?void 0:J.find((e=>e[0]==f)))[1])||void 0===e||null===(t=e.transactions)||void 0===t?void 0:t.filter((e=>(null===e||void 0===e?void 0:e.token)==ce));if(G(l.data.length>0?[...i,...l.data[0]]:i),(null===ue||void 0===ue?void 0:ue.length)>0)if(console.log("nft info :",ue),ue[1].hasOwnProperty("nonfungible")){let e=await s.bearer(ce);v({listed:!1,tokenIdentifier:(0,n.TZ)(m,f),seller_principal:null===e||void 0===e?void 0:e.ok})}else if(ue[1].inhouse_sale){let e=await(null===R||void 0===R?void 0:R.get_listed_nft_details(ce));console.log("inhouse listed nft :",e),200===e.status&&"Ok"===e.status_text&&v({...e.data[0],listed:!0})}const r=D.A[m];let a=[];for(const e of r){const t=(0,o.bs)(e);void 0!==t&&a.push(t)}re(a),console.log("traits here :",r,a)}catch(s){console.log("error in fetching details :",s)}E(!1)})()}),[f,m,L]),(0,g.jsxs)("div",{className:"flex w-full min-h-screen gap-4 flex-col items-center  text-white px-2 md:px-20 mt-[100px]",children:[q?(0,g.jsx)("div",{className:"w-full flex justify-center h-screen items-center",children:(0,g.jsx)(a.A,{color:"white",size:25})}):(0,g.jsxs)("div",{className:"flex w-full h-full flex-col md:flex-row gap-2 mx-4",children:[(0,g.jsxs)("div",{className:"flex flex-col gap-4 w-full md:w-1/2 h-full md:items-start  mb-4 md:mb-0",children:[(0,g.jsx)("div",{className:"rounded-lg p-1 w-full flex border border-gray-400 pt-3 flex-col",children:(0,g.jsx)("img",{src:`https://${f}.raw.icp0.io/?tokenid=${(0,n.TZ)(m,f)}&type=thumbnail`,alt:"",className:"rounded-md ml-3 w-auto cursor-pointer"})}),(0,g.jsxs)("div",{className:"hidden md:flex flex-col w-full items-start",children:[(0,g.jsx)("h1",{className:"font-bold",children:"Traits"}),(0,g.jsx)("div",{className:"flex flex-wrap w-full",children:ie?ie.map(((e,t)=>(0,g.jsxs)("div",{className:"flex flex-col p-1 w-full md:w-1/2 lg:w-1/3",children:[(0,g.jsx)("span",{className:"font-bold",children:e[0]}),(0,g.jsx)("span",{children:e[1]})]},t))):(0,g.jsx)("span",{className:"text-sm",children:"Coming Soon ..."})})]})]}),(0,g.jsx)("div",{className:"flex  justify flex-col w-full md:w-1/2 ",children:(0,g.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,g.jsxs)("h1",{className:"text-[30px] font-bold",children:[h&&"ICKitties"," # ",m]}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsxs)("span",{children:["Owned by"," ",(0,o.Wr)(null===h||void 0===h||null===(e=h.seller_principal)||void 0===e?void 0:e.toString())]}),(0,g.jsx)(M.r6e,{color:"white",className:"cursor-pointer",onClick:()=>{var e;return(0,o.lW)(null===h||void 0===h||null===(e=h.seller_principal)||void 0===e?void 0:e.toString())}})]}),(0,g.jsxs)("div",{className:"flex gap-1  text-sm items-center",children:[(0,g.jsx)("span",{children:(0,g.jsx)(x.W7w,{size:25,color:"gray"})}),(0,g.jsxs)("span",{children:[ne&&ne," views"]})]}),(0,g.jsxs)("div",{className:"flex flex-col  xs:px-3 md:px-0 gap-4 w-full",children:[(null===h||void 0===h?void 0:h.listed)&&(0,g.jsxs)("div",{className:"flex  flex-col w-full gap-1  bg-[#1B1B1B] border border-gray-400 p-2 rounded-lg",children:[(0,g.jsx)("h3",{children:"Current Price"}),(0,g.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,g.jsx)("img",{src:A,height:"7px",width:"15px"}),(0,g.jsx)("span",{className:"flex text-lg",children:h&&(Number(null===h||void 0===h?void 0:h.nft_price)/1e8).toFixed(2)})]}),Z&&Z.principal.toString()===(null===h||void 0===h||null===(t=h.seller_principal)||void 0===t?void 0:t.toString())?(0,g.jsxs)("div",{className:"flex flex-row gap-4 justify-center items-center w-full",children:[(0,g.jsx)(_.A,{nft:null===h||void 0===h?void 0:h.token_identifier}),(0,g.jsx)(C.A,{nft:null===h||void 0===h?void 0:h.token_identifier,handleTrigger:oe})]}):(0,g.jsxs)("div",{className:"flex flex-row gap-4 w-full",children:[(0,g.jsx)(O.A,{nft_price:Number(null===h||void 0===h?void 0:h.nft_price),nftid:null===h||void 0===h?void 0:h.token_identifier}),(0,g.jsx)(j,{nft_price:Number(null===h||void 0===h?void 0:h.nft_price),nftid:null===h||void 0===h?void 0:h.token_identifier,handleTrigger:oe})]})]}),(0,g.jsx)(w,{history:Y}),(0,g.jsx)(N,{offers:null===h||void 0===h?void 0:h.offers,nft:null===h||void 0===h?void 0:h.token_identifier,nftOwner:null===h||void 0===h||null===(s=h.seller_principal)||void 0===s?void 0:s.toString(),handleTrigger:oe})]})]})})]}),h&&(0,g.jsx)(S,{nftDetails:h,collectionID:f,nftID:m,nftPrice:Number(null===h||void 0===h?void 0:h.nft_price)/1e8})]})}},6551:(e,t,s)=>{s.d(t,{A:()=>f});var l=s(7097),i=s(5043),r=s(8973),n=s(8247),a=s(2013),d=s(1699),o=s(1935),c=s(39),u=s(4230),x=s(579);const f=e=>{let{nft:t,handleTrigger:s}=e;const[f,m]=(0,i.useState)(!1),[p,h]=(0,i.useState)(""),[v,g]=(0,i.useState)(!1),{invalidateListings:j}=(0,a.A)(),[b,w]=(0,i.useState)(!1),y=(0,c.fJ)(),{user:N}=(0,c._d)(),[k,S]=(0,i.useState)(!1),[_,C]=(0,i.useState)(""),[T,A]=(0,i.useState)(""),O=async(e,t)=>{C(e),A(t),S(!0),setTimeout((()=>S(!1)),3e3)},{mutateAsync:D}=(0,l.n)({mutationFn:e=>M(e),onSuccess:async()=>{j()}}),M=async e=>{e.preventDefault();let l=(0,d.M)(o.WC,u.c,y);if(console.log("new price : ",p,t),!l)return void O("login first","error");if(!p||0==p||!t)return;w(!0),g(!0);let i=await(null===l||void 0===l?void 0:l.update_nft_price(t,parseInt(1e8*p)));200==(null===i||void 0===i?void 0:i.status)&&"Ok"==(null===i||void 0===i?void 0:i.status_text)?O("price updated successfully","success"):O(null===i||void 0===i?void 0:i.error_text,"error"),s(),w(!1),g(!1)};return(0,x.jsxs)("div",{className:"flex flex-col gap-1 w-1/2",children:[k&&(0,x.jsx)("div",{className:"absolute text-xs top-5 z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===T?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,x.jsx)("div",{className:"modal-message",children:(0,x.jsx)("p",{children:_})})}),(0,x.jsx)("button",{className:"flex bg-[#6fa0d1] w-full rounded-lg mt-4 text-white justify-center items-center p-2",onClick:()=>m(!0),children:"Update"}),f&&(0,x.jsx)("div",{className:"fixed inset-0 p-4 flex items-center justify-center z-50 bg-black bg-opacity-50",children:(0,x.jsxs)("div",{className:"bg-[#252525] rounded-lg shadow-lg p-6 w-96",children:[(0,x.jsxs)("div",{className:"flex justify-between ",children:[(0,x.jsx)("h2",{className:" mb-4",children:"Update NFT price"}),(0,x.jsx)(r.PXF,{className:"cursor-pointer",onClick:()=>m(!1)})]}),(0,x.jsxs)("form",{onSubmit:D,children:[(0,x.jsx)("input",{type:"number",id:"price",value:p,placeholder:"enter new nft price",onChange:e=>h(e.target.value),className:" border border-white text-black rounded p-1 w-full mb-4",required:!0}),(0,x.jsx)("div",{className:"flex justify-end",children:v?(0,x.jsx)(n.A,{color:"white",size:20}):(0,x.jsx)("button",{type:"submit",className:"px-4 py-2 bg-white text-black rounded",children:"update"})})]})]})})]})}},5772:(e,t,s)=>{s.d(t,{A:()=>p});var l=s(3248),i=s(7097),r=s(5043),n=s(8973),a=s(8247),d=s(2013),o=s(39),c=s(1935),u=s(4230),x=s(1699),f=s(3216),m=s(579);const p=e=>{let{nft:t,handleTrigger:s}=e;const[p,h]=(0,r.useState)(!1),[v,g]=(0,r.useState)(!1),[j,b]=(0,r.useState)(!1),[w,y]=(0,r.useState)(""),[N,k]=(0,r.useState)(""),{invalidateListings:S,invalidateUserNfts:_}=(0,d.A)(),C=(0,o.fJ)(),T=(0,f.Zp)(),A=(0,l.jE)(),O=async(e,t)=>{y(e),k(t),b(!0),setTimeout((()=>b(!1)),3e3)},{mutateAsync:D}=(0,i.n)({mutationFn:()=>M(),onSuccess:async()=>{S(),_(),g(!1)}}),M=async()=>{let e=(0,x.M)(c.WC,u.c,C);if(t&&e){g(!0);try{console.log("unlist :",t);let l=await(null===e||void 0===e?void 0:e.un_list_nft(t));200==(null===l||void 0===l?void 0:l.status)&&"Ok"==(null===l||void 0===l?void 0:l.status_text)?(O("NFT unlisted successfully","success"),T("/profile")):(O(null===l||void 0===l?void 0:l.error_text,"error"),T("/profile")),s(),A.setQueryData(["refreshData"],Math.random()),console.log("unlisting res :",l)}catch(l){console.log("error in unlisting token :",l)}}};return(0,m.jsxs)("div",{className:"flex flex-col gap-1 w-1/2",children:[(0,m.jsx)("div",{className:"flex flex-row gap-4",children:(0,m.jsx)("button",{className:"flex bg-[#2c2d2e] rounded-lg w-full mt-4 text-white justify-center items-center p-2 cursor-pointer",onClick:()=>h(!0),children:"Unlist"})}),p&&(0,m.jsxs)("div",{className:"fixed inset-0 p-4 flex items-center justify-center z-50 bg-black bg-opacity-50",children:[j&&(0,m.jsx)("div",{className:"absolute top-10 text-xs z-50  left-1/2 transform -translate-x-1/2 transition-transform duration-500 ease-out "+("success"===N?"bg-green-100 text-green-800 border border-green-300 rounded-lg p-1 animate-slide-in":"bg-red-100 text-red-800 border border-red-300 rounded-lg p-1 animate-slide-in"),children:(0,m.jsx)("div",{className:"modal-message",children:(0,m.jsx)("p",{children:w})})}),(0,m.jsxs)("div",{className:"bg-[#252525] rounded-lg shadow-lg p-6 w-96",children:[(0,m.jsxs)("div",{className:"flex justify-between ",children:[(0,m.jsx)("h2",{className:" mb-4",children:"Unlist NFT"}),(0,m.jsx)(n.PXF,{className:"cursor-pointer",onClick:()=>h(!1)})]}),(0,m.jsx)("span",{children:"Remove NFT from the marketplace?"}),(0,m.jsx)("div",{className:"flex justify-end mt-3",children:v?(0,m.jsx)(a.A,{color:"white",size:20}):(0,m.jsx)("button",{onClick:D,className:"px-4 py-2 bg-white text-black rounded",children:"Unlist"})})]})]})]})}}}]);
//# sourceMappingURL=40.4cdd11c3.chunk.js.map